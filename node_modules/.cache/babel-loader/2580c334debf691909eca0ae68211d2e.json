{"ast":null,"code":"import _defineProperty from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"F:\\\\PROYECTOS\\\\recicla\\\\src\\\\components\\\\control_panel\\\\WindowAccesoEmpresas.js\";\n\n/**\r\n* CLASS WindowAccesoEmpresas\r\n*\r\n* Contiene el componente que lista las empresas a las que pùede acceder un usuario\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\nimport React, { Component } from 'react';\nimport { listadoAccesoEmpresas } from '../api_calls/ApiCalls';\nimport globalState from '../configuration/GlobalState';\nimport alertify from 'alertifyjs';\n\nvar WindowAccesoEmpresas =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(WindowAccesoEmpresas, _Component);\n\n  function WindowAccesoEmpresas(props) {\n    var _this;\n\n    _classCallCheck(this, WindowAccesoEmpresas);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WindowAccesoEmpresas).call(this, props));\n    _this.state = {\n      objEmpresasAccesos: ''\n    };\n    return _this;\n  }\n\n  _createClass(WindowAccesoEmpresas, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      var idUser = this.props.params.idUser;\n      listadoAccesoEmpresas(idUser).then(function (response) {\n        response = response.data;\n\n        if (response.msg === 'error') {\n          //aqui no me dejara continuar si la empresa noe xiste\n          alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: ' + response.detail);\n        } else {\n          _this2.setState({\n            objEmpresasAccesos: response\n          }, function () {\n            globalState.dispatch({\n              //cargamos los datos de los permisos\n              type: \"configEmpresas\",\n              params: {}\n            });\n            response.forEach(function (objEmpresasAccesos, i) {\n              //chequear los que tengan el permiso activido en el rol\n              var checked = false;\n\n              if (objEmpresasAccesos.checked > 0) {\n                checked = true;\n              }\n\n              _this2.setState(_defineProperty({}, objEmpresasAccesos.id, checked), function () {\n                globalState.getState().configEmpresas[objEmpresasAccesos.id] = checked;\n              });\n            });\n          });\n        }\n      }).catch(function (error) {\n        alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />' + error);\n      });\n    }\n  }, {\n    key: \"handleCheckBox\",\n    value: function handleCheckBox(e) {\n      //control del check de los checkbox\n      var checkBox = e.target.name;\n      var checked = e.target.checked;\n      this.setState(_defineProperty({}, checkBox, checked), function () {\n        globalState.getState().configEmpresas[checkBox] = checked;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        id: \"contenedorPermisos\",\n        style: {\n          paddingLeft: '7px',\n          paddingTop: '7px',\n          paddingBottom: '5px',\n          height: 'calc(100% - 92px)',\n          overflowY: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, this.state.objEmpresasAccesos !== '' ? this.state.objEmpresasAccesos.map(function (objEmpresasAccesos, i) {\n        var padding = 5;\n        var fontWeight = 'bold';\n\n        if (objEmpresasAccesos.nivel > 1) {\n          padding = objEmpresasAccesos.nivel * 10;\n          fontWeight = 'normal';\n        }\n\n        return React.createElement(\"div\", {\n          key: i,\n          style: {\n            width: '100%',\n            height: '24px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            float: 'left'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          name: objEmpresasAccesos.id,\n          type: \"checkbox\",\n          onChange: _this3.handleCheckBox.bind(_this3),\n          checked: _this3.state[objEmpresasAccesos.id] || false,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          style: {\n            paddingLeft: padding + 'px',\n            float: 'left',\n            fontWeight: fontWeight\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, objEmpresasAccesos.nombre_comercial));\n      }) : '');\n    }\n  }]);\n\n  return WindowAccesoEmpresas;\n}(Component);\n\nexport default WindowAccesoEmpresas;","map":{"version":3,"sources":["F:\\PROYECTOS\\recicla\\src\\components\\control_panel\\WindowAccesoEmpresas.js"],"names":["React","Component","listadoAccesoEmpresas","globalState","alertify","WindowAccesoEmpresas","props","state","objEmpresasAccesos","idUser","params","then","response","data","msg","alert","detail","setState","dispatch","type","forEach","i","checked","id","getState","configEmpresas","catch","error","e","checkBox","target","name","paddingLeft","paddingTop","paddingBottom","height","overflowY","map","padding","fontWeight","nivel","width","float","handleCheckBox","bind","nombre_comercial"],"mappings":";;;;;;;;AAAA;;;;;;;AAQA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAAQC,qBAAR,QAAoC,uBAApC;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAOC,QAAP,MAAqB,YAArB;;IAEMC,oB;;;;;AACF,gCAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,8FAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACTC,MAAAA,kBAAkB,EAAG;AADZ,KAAb;AAFe;AAKlB;;;;yCACmB;AAAA;;AAChB,UAAIC,MAAM,GAAG,KAAKH,KAAL,CAAWI,MAAX,CAAkBD,MAA/B;AACAP,MAAAA,qBAAqB,CAACO,MAAD,CAArB,CAA8BE,IAA9B,CAAmC,UAAAC,QAAQ,EAAI;AAC3CA,QAAAA,QAAQ,GAAGA,QAAQ,CAACC,IAApB;;AACA,YAAGD,QAAQ,CAACE,GAAT,KAAiB,OAApB,EAA4B;AAAC;AACzBV,UAAAA,QAAQ,CAACW,KAAT,CAAe,QAAf,EAAyB,8EAA4EH,QAAQ,CAACI,MAA9G;AACH,SAFD,MAGI;AACA,UAAA,MAAI,CAACC,QAAL,CAAc;AAACT,YAAAA,kBAAkB,EAACI;AAApB,WAAd,EAA4C,YAAI;AAC5CT,YAAAA,WAAW,CAACe,QAAZ,CAAqB;AAAC;AAClBC,cAAAA,IAAI,EAAK,gBADQ;AAEjBT,cAAAA,MAAM,EAAG;AAFQ,aAArB;AAIAE,YAAAA,QAAQ,CAACQ,OAAT,CAAiB,UAACZ,kBAAD,EAAoBa,CAApB,EAA0B;AAAC;AACxC,kBAAIC,OAAO,GAAG,KAAd;;AACA,kBAAGd,kBAAkB,CAACc,OAAnB,GAA6B,CAAhC,EAAkC;AAC9BA,gBAAAA,OAAO,GAAG,IAAV;AACH;;AACD,cAAA,MAAI,CAACL,QAAL,qBAAiBT,kBAAkB,CAACe,EAApC,EAAyCD,OAAzC,GAAmD,YAAI;AACnDnB,gBAAAA,WAAW,CAACqB,QAAZ,GAAuBC,cAAvB,CAAsCjB,kBAAkB,CAACe,EAAzD,IAA+DD,OAA/D;AACH,eAFD;AAGH,aARD;AASH,WAdD;AAeH;AACJ,OAtBD,EAuBCI,KAvBD,CAuBO,UAAUC,KAAV,EAAiB;AACpBvB,QAAAA,QAAQ,CAACW,KAAT,CAAe,QAAf,EAAyB,wDAAsDY,KAA/E;AACH,OAzBD;AA0BH;;;mCACcC,C,EAAE;AAAC;AACd,UAAIC,QAAQ,GAAGD,CAAC,CAACE,MAAF,CAASC,IAAxB;AACA,UAAIT,OAAO,GAAIM,CAAC,CAACE,MAAF,CAASR,OAAxB;AACA,WAAKL,QAAL,qBAAiBY,QAAjB,EAA4BP,OAA5B,GAAsC,YAAI;AACtCnB,QAAAA,WAAW,CAACqB,QAAZ,GAAuBC,cAAvB,CAAsCI,QAAtC,IAAkDP,OAAlD;AACH,OAFD;AAGH;;;6BACO;AAAA;;AACN,aACU;AAAK,QAAA,EAAE,EAAC,oBAAR;AAA6B,QAAA,KAAK,EAAE;AAACU,UAAAA,WAAW,EAAE,KAAd;AAAoBC,UAAAA,UAAU,EAAE,KAAhC;AAAsCC,UAAAA,aAAa,EAAE,KAArD;AAA2DC,UAAAA,MAAM,EAAC,mBAAlE;AAAsFC,UAAAA,SAAS,EAAG;AAAlG,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEK,KAAK7B,KAAL,CAAWC,kBAAX,KAAkC,EAAnC,GACI,KAAKD,KAAL,CAAWC,kBAAX,CAA8B6B,GAA9B,CAAkC,UAAC7B,kBAAD,EAAoBa,CAApB,EAA0B;AACxD,YAAIiB,OAAO,GAAG,CAAd;AACA,YAAIC,UAAU,GAAG,MAAjB;;AACA,YAAG/B,kBAAkB,CAACgC,KAAnB,GAA2B,CAA9B,EAAgC;AAC5BF,UAAAA,OAAO,GAAG9B,kBAAkB,CAACgC,KAAnB,GAAyB,EAAnC;AACAD,UAAAA,UAAU,GAAG,QAAb;AACH;;AACD,eAAO;AAAK,UAAA,GAAG,EAAElB,CAAV;AAAa,UAAA,KAAK,EAAE;AAACoB,YAAAA,KAAK,EAAC,MAAP;AAAcN,YAAAA,MAAM,EAAC;AAArB,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACK;AAAK,UAAA,KAAK,EAAE;AAACO,YAAAA,KAAK,EAAC;AAAP,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAO,UAAA,IAAI,EAAElC,kBAAkB,CAACe,EAAhC;AAAoC,UAAA,IAAI,EAAC,UAAzC;AAAoD,UAAA,QAAQ,EAAE,MAAI,CAACoB,cAAL,CAAoBC,IAApB,CAAyB,MAAzB,CAA9D;AAA8F,UAAA,OAAO,EAAE,MAAI,CAACrC,KAAL,CAAWC,kBAAkB,CAACe,EAA9B,KAAqC,KAA5I;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CADL,EAIK;AAAK,UAAA,KAAK,EAAE;AAACS,YAAAA,WAAW,EAACM,OAAO,GAAC,IAArB;AAA0BI,YAAAA,KAAK,EAAC,MAAhC;AAAuCH,YAAAA,UAAU,EAACA;AAAlD,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACK/B,kBAAkB,CAACqC,gBADxB,CAJL,CAAP;AAQH,OAfD,CADJ,GAiBE,EAnBN,CADV;AAwBF;;;;EApE+B5C,S;;AAuEnC,eAAeI,oBAAf","sourcesContent":["/**\r\n* CLASS WindowAccesoEmpresas\r\n*\r\n* Contiene el componente que lista las empresas a las que pùede acceder un usuario\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\r\n\r\nimport React, { Component } from 'react';\r\nimport {listadoAccesoEmpresas} from '../api_calls/ApiCalls';\r\nimport globalState from '../configuration/GlobalState';\r\nimport alertify from 'alertifyjs';\r\n\r\nclass WindowAccesoEmpresas extends Component {\r\n    constructor(props) {        \r\n        super(props);   \r\n        this.state = {\r\n            objEmpresasAccesos : ''\r\n        };        \r\n    } \r\n    componentWillMount(){\r\n        var idUser = this.props.params.idUser;\r\n        listadoAccesoEmpresas(idUser).then(response => { \r\n            response = response.data;            \r\n            if(response.msg === 'error'){//aqui no me dejara continuar si la empresa noe xiste\r\n                alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: '+response.detail); \r\n            }\r\n            else{\r\n                this.setState({objEmpresasAccesos:response},()=>{\r\n                    globalState.dispatch({//cargamos los datos de los permisos\r\n                        type   : \"configEmpresas\",\r\n                        params : {}\r\n                    });\r\n                    response.forEach((objEmpresasAccesos,i) => {//chequear los que tengan el permiso activido en el rol\r\n                        var checked = false;                        \r\n                        if(objEmpresasAccesos.checked > 0){\r\n                            checked = true;\r\n                        }                        \r\n                        this.setState({ [objEmpresasAccesos.id]: checked },()=>{\r\n                            globalState.getState().configEmpresas[objEmpresasAccesos.id] = checked;                             \r\n                        });  \r\n                    });                    \r\n                });\r\n            }\r\n        })\r\n        .catch(function (error) {\r\n            alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />'+error);\r\n        });\r\n    } \r\n    handleCheckBox(e){//control del check de los checkbox\r\n        var checkBox = e.target.name;\r\n        var checked  = e.target.checked;        \r\n        this.setState({ [checkBox]: checked },()=>{\r\n            globalState.getState().configEmpresas[checkBox] = checked;  \r\n        });          \r\n    }    \r\n  \trender() {             \r\n  \t  \treturn (\r\n                <div id=\"contenedorPermisos\" style={{paddingLeft: '7px',paddingTop: '7px',paddingBottom: '5px',height:'calc(100% - 92px)',overflowY : 'auto' }}>   \r\n                {\r\n                    (this.state.objEmpresasAccesos !== '') ?\r\n                        this.state.objEmpresasAccesos.map((objEmpresasAccesos,i) => {\r\n                            var padding = 5;\r\n                            var fontWeight = 'bold';\r\n                            if(objEmpresasAccesos.nivel > 1){\r\n                                padding = objEmpresasAccesos.nivel*10;\r\n                                fontWeight = 'normal';\r\n                            }                                                         \r\n                            return <div key={i} style={{width:'100%',height:'24px'}}>\r\n                                        <div style={{float:'left'}}>\r\n                                            <input name={objEmpresasAccesos.id} type=\"checkbox\" onChange={this.handleCheckBox.bind(this)} checked={this.state[objEmpresasAccesos.id] || false } />\r\n                                        </div>\r\n                                        <div style={{paddingLeft:padding+'px',float:'left',fontWeight:fontWeight }}>\r\n                                            {objEmpresasAccesos.nombre_comercial} \r\n                                        </div>\r\n                                    </div>\r\n                        })\r\n                    : ''\r\n                }  \r\n                </div>  \t\t\t\t\r\n\t\t\t  );\r\n  \t}\r\n}\r\n\r\nexport default WindowAccesoEmpresas"]},"metadata":{},"sourceType":"module"}