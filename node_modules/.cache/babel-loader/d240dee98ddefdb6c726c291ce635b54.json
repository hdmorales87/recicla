{"ast":null,"code":"import _classCallCheck from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\src\\\\components\\\\desktop\\\\NameUser.js\";\n\n/**\r\n* CLASS NameUser\r\n*\r\n* Contiene el contenedor del nombre del usuario\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\nimport React, { Component } from 'react';\nimport MaterialIcon from 'material-icons-react';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport CustomToggle from './CustomToggleDropdown';\nimport globalState from '../configuration/GlobalState';\nimport configJson from '../configuration/configuration.json';\nimport { divMouseOver, divMouseOut } from '../configuration/GlobalFunctions';\nimport Window from '../window/Window';\nimport { logout, insertarActualizarFila } from '../api_calls/ApiCalls';\nimport alertify from 'alertifyjs';\nimport './desktop.css';\nimport '../../css/alertify.css';\n\nvar NameUser =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NameUser, _Component);\n\n  function NameUser(props) {\n    var _this;\n\n    _classCallCheck(this, NameUser);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NameUser).call(this, props));\n    var userData = globalState.getState().userData;\n    console.log(userData[0].nombre.toUpperCase());\n    _this.btnLogoutSession = _this.btnLogoutSession.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      showModal: false,\n      username: userData[0].nombre.toUpperCase()\n    };\n    return _this;\n  } //evento cerrar sesion\n\n\n  _createClass(NameUser, [{\n    key: \"btnLogoutSession\",\n    value: function btnLogoutSession() {\n      //boton de cerrar sesion\n      alertify.confirm('Confirmacion', 'Desea cerrar la sesion?', this.logoutSession.bind(this), function () {});\n    } //abrir la modal\n\n  }, {\n    key: \"handleOpenModal\",\n    value: function handleOpenModal() {\n      //boton de abrir modal        \n      globalState.dispatch({\n        type: \"windowOpen\",\n        params: true\n      });\n    } //metodo cerrar sesion\n\n  }, {\n    key: \"logoutSession\",\n    value: function logoutSession() {\n      var _this2 = this;\n\n      //llamar a cerrar sesion en la API\n      logout().then(function (res) {\n        var response = res.data;\n\n        if (response.msg === \"error\") {\n          alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />' + response.detail);\n        } else if (response.msg === \"success\") {\n          _this2.props.history.push('/'); //me devuelve al login       \t  \t  \t  \t\n\n        }\n      }).catch(function (err) {\n        alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />' + err);\n      });\n    }\n  }, {\n    key: \"functionUpdateUser\",\n    value: function functionUpdateUser() {\n      //actualizacion de datos de usuario\n      var formDataUser = globalState.getState().formDataUser;\n      insertarActualizarFila('put', 'users', formDataUser).then(function (response) {\n        response = response.data;\n\n        if (response.msg === 'error') {\n          alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: ' + response.detail);\n        } else {\n          globalState.dispatch({\n            type: \"windowOpen\",\n            params: false\n          }); //ACTUALIZAR EL GLOBAL STORE  \n\n          globalState.getState().userData[0] = formDataUser;\n        }\n      }).catch(function (error) {\n        alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />' + error);\n      });\n    }\n  }, {\n    key: \"functionChangePassword\",\n    value: function functionChangePassword() {\n      alert('jejeje');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return (//carga el menu de opciones del usuario  \t  \t\t\n        React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        })\n      );\n    }\n  }]);\n\n  return NameUser;\n}(Component);\n\nexport default NameUser;","map":{"version":3,"sources":["C:\\PROYECTOS\\chatarreria-front\\src\\components\\desktop\\NameUser.js"],"names":["React","Component","MaterialIcon","Dropdown","CustomToggle","globalState","configJson","divMouseOver","divMouseOut","Window","logout","insertarActualizarFila","alertify","NameUser","props","userData","getState","console","log","nombre","toUpperCase","btnLogoutSession","bind","state","showModal","username","confirm","logoutSession","dispatch","type","params","then","res","response","data","msg","alert","detail","history","push","catch","err","formDataUser","error"],"mappings":"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","sourcesContent":["/**\r\n* CLASS NameUser\r\n*\r\n* Contiene el contenedor del nombre del usuario\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\r\n\r\nimport React, { Component } from 'react';\r\nimport MaterialIcon from 'material-icons-react';\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport CustomToggle from './CustomToggleDropdown';\r\nimport globalState from '../configuration/GlobalState';\r\nimport configJson from '../configuration/configuration.json';\r\nimport {divMouseOver,divMouseOut} from '../configuration/GlobalFunctions';\r\nimport Window from '../window/Window';\r\nimport {logout,insertarActualizarFila} from '../api_calls/ApiCalls';\r\nimport alertify from 'alertifyjs';\r\nimport './desktop.css';\r\nimport '../../css/alertify.css';\r\n\r\nclass NameUser extends Component {\r\n\t  constructor(props) {\r\n        super(props); \r\n              \r\n        var userData = globalState.getState().userData;\r\n        console.log(userData[0].nombre.toUpperCase());         \r\n        this.btnLogoutSession = this.btnLogoutSession.bind(this);\r\n        this.state = {\r\n            showModal : false,\r\n            username  : userData[0].nombre.toUpperCase()\r\n        };\r\n    }\r\n    //evento cerrar sesion\r\n\t  btnLogoutSession(){//boton de cerrar sesion\r\n\t  \t  alertify.confirm('Confirmacion', 'Desea cerrar la sesion?', this.logoutSession.bind(this), function(){});\r\n\t  } \r\n    //abrir la modal\r\n    handleOpenModal(){//boton de abrir modal        \r\n        globalState.dispatch({\r\n                type   : \"windowOpen\",\r\n                params : true\r\n            });\r\n    }          \r\n    //metodo cerrar sesion\r\n\t  logoutSession(){//llamar a cerrar sesion en la API\r\n\t \t    logout()\r\n        .then(res => {\r\n            var response = res.data; \r\n          \tif (response.msg === \"error\") {      \t  \t  \t  \t\r\n          \t\talertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />'+response.detail);  \t  \t  \t  \t\r\n          \t} else if (response.msg === \"success\"){\r\n          \t  \tthis.props.history.push('/');//me devuelve al login       \t  \t  \t  \t\r\n          \t}\r\n        })\r\n        .catch(err => {\r\n          \talertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />'+err);      \t  \t  \r\n        });\r\n\t  }   \r\n    functionUpdateUser(){\r\n        //actualizacion de datos de usuario\r\n        var formDataUser = globalState.getState().formDataUser;\r\n        insertarActualizarFila('put','users',formDataUser)\r\n        .then(response => {\r\n            response = response.data;\r\n            if(response.msg === 'error'){\r\n                alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: '+response.detail); \r\n            }\r\n            else {                \r\n                globalState.dispatch({\r\n                    type   : \"windowOpen\",\r\n                    params : false\r\n                });\r\n                //ACTUALIZAR EL GLOBAL STORE  \r\n                globalState.getState().userData[0] = formDataUser;                          \r\n            }\r\n        })\r\n        .catch(function (error) {\r\n            alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />'+error);\r\n        });\r\n    } \r\n    functionChangePassword(){\r\n        alert('jejeje');\r\n    } \r\n    render() {\r\n    \t  \treturn (//carga el menu de opciones del usuario  \t  \t\t\r\n        \t\t\t<div></div>            \t    \t\t\r\n\t     );\r\n    }\r\n}\r\n\r\nexport default NameUser"]},"metadata":{},"sourceType":"module"}