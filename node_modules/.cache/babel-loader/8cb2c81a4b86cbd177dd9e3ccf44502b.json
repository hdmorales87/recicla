{"ast":null,"code":"import _defineProperty from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"F:\\\\PROYECTOS\\\\recicla\\\\src\\\\components\\\\desktop\\\\FormDataUser.js\";\n\n/**\r\n* CLASS FormDataUser\r\n*\r\n* Contiene el componente formulario de datos de usuario\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\nimport React, { Component } from 'react';\nimport ComboBoxFormDataGrid from '../data_grid/ComboBoxFormDataGrid';\nimport globalState from '../configuration/GlobalState';\nimport { uploaderFile } from '../api_calls/ApiCalls';\nimport { ValidateExtension } from '../configuration/GlobalFunctions';\nimport configJson from '../configuration/configuration.json';\nimport alertify from 'alertifyjs';\nimport '../../css/alertify.css';\nimport Form from 'react-bootstrap/Form';\nimport './desktop.css';\n\nvar FormDataUser =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FormDataUser, _Component);\n\n  function FormDataUser(props) {\n    var _this;\n\n    _classCallCheck(this, FormDataUser);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FormDataUser).call(this, props));\n    var userData = globalState.getState().userData;\n    _this.state = {\n      id: userData[0].id,\n      email: userData[0].email,\n      primer_nombre: userData[0].primer_nombre,\n      segundo_nombre: userData[0].segundo_nombre,\n      primer_apellido: userData[0].primer_apellido,\n      segundo_apellido: userData[0].segundo_apellido,\n      id_tipo_documento: userData[0].id_tipo_documento,\n      documento: userData[0].documento,\n      direccion: userData[0].direccion,\n      telefono: userData[0].telefono,\n      imagen_user: 'default.png'\n    };\n    globalState.dispatch({\n      //cargamos lo datos del formulario y los dejamos disponibles en toda la sesion\n      type: \"formDataUser\",\n      params: {\n        id: userData[0].id,\n        email: userData[0].email,\n        primer_nombre: userData[0].primer_nombre,\n        segundo_nombre: userData[0].segundo_nombre,\n        primer_apellido: userData[0].primer_apellido,\n        segundo_apellido: userData[0].segundo_apellido,\n        id_tipo_documento: userData[0].id_tipo_documento,\n        documento: userData[0].documento,\n        direccion: userData[0].direccion,\n        telefono: userData[0].telefono,\n        imagen_user: userData[0].imagen_usuario\n      }\n    });\n    return _this;\n  }\n\n  _createClass(FormDataUser, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {//....\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var userData = globalState.getState().userData;\n\n      if (userData[0].imagen_usuario !== undefined && userData[0].imagen_usuario !== \"\") {\n        this.setState({\n          imagen_user: userData[0].imagen_usuario\n        });\n      }\n    }\n  }, {\n    key: \"changeTipoIdentificacion\",\n    value: function changeTipoIdentificacion(e) {\n      this.setState({\n        id_tipo_documento: e.target.value\n      });\n      globalState.getState().formDataUser['id_tipo_documento'] = e.target.value;\n    }\n  }, {\n    key: \"handleStateChange\",\n    value: function handleStateChange(e) {\n      //CARGAR AL ESTADO GLOBAL LOS DATOS DEL FUNCIONARIO  \n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n      globalState.getState().formDataUser[e.target.name] = e.target.value;\n    }\n  }, {\n    key: \"handleImageUser\",\n    value: function handleImageUser(e) {\n      var _this2 = this;\n\n      //subir la imagen del usuario\n      var file = e.target.files[0];\n      var allowedFiles = [\".jpg\", \".jpeg\", \".png\"];\n\n      if (!ValidateExtension(allowedFiles, file.name)) {\n        alertify.alert('Error!', 'Solo se permiten imagenes con extension jpeg, jpg o png !');\n      } else {\n        if (file.size > configJson.maxAvatarSize) {\n          alertify.alert('Error!', 'Solo se permiten imagenes de maximo 500K!');\n        } else {\n          uploaderFile(file, 'users', 'imagen_usuario', this.state.id, configJson.folderAvatarUser).then(function (res) {\n            var response = res.data;\n\n            if (response.msg === \"error\") {\n              alertify.alert('Error!', 'Ha ocurrido un error subiendo el archivo!<br />Codigo de Error: ' + response.detail);\n            } else {\n              _this2.setState({\n                imagen_user: response.detail\n              });\n\n              globalState.dispatch({\n                type: \"imageUser\",\n                params: response.detail\n              });\n            }\n          }).catch(function (err) {\n            alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />' + err);\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var sqlParams = {\n        sqlCols: ['id', 'nombre']\n      };\n      var date = new Date();\n      var randomDate = date.getTime();\n      var path = \"http://\" + window.location.hostname + \":5000/\";\n      return React.createElement(\"div\", {\n        className: \"container\",\n        style: {\n          height: 'calc(100% - 92px)',\n          overflowY: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"contentImageUser\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"divImageUser\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"ImageUser\",\n        alt: \"imageUser\",\n        src: path + configJson.folderAvatarUser + this.state.imagen_user + '?' + randomDate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        id: \"uploadedImageUser\",\n        type: \"file\",\n        name: \"uploadedImageUser\",\n        onChange: this.handleImageUser.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"table-responsive mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"formBasicUsername\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Usuario\"), React.createElement(Form.Control, {\n        name: \"email\",\n        type: \"email\",\n        readOnly: true,\n        defaultValue: this.state.email,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicFirstname\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Primer Nombre\"), React.createElement(Form.Control, {\n        name: \"primer_nombre\",\n        type: \"text\",\n        value: this.state.primer_nombre,\n        onChange: this.handleStateChange.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicSecondname\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Segundo Nombre\"), React.createElement(Form.Control, {\n        name: \"segundo_nombre\",\n        type: \"text\",\n        value: this.state.segundo_nombre,\n        onChange: this.handleStateChange.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicLastname1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"Primer Apellido\"), React.createElement(Form.Control, {\n        name: \"primer_apellido\",\n        type: \"text\",\n        value: this.state.primer_apellido,\n        onChange: this.handleStateChange.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicLastname2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"Segundo Apellido\"), React.createElement(Form.Control, {\n        name: \"segundo_apellido\",\n        type: \"text\",\n        value: this.state.segundo_apellido,\n        onChange: this.handleStateChange.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicLastname2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Tipo Identificacion\"), React.createElement(ComboBoxFormDataGrid, {\n        valueName: \"nombre\",\n        apiField: 'document_types',\n        dinamic: \"true\",\n        name: \"id_tipo_documento\",\n        type: \"select\",\n        functionChange: this.changeTipoIdentificacion.bind(this),\n        value: this.state.id_tipo_documento,\n        sqlParams: sqlParams,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicDocument\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Identificacion\"), React.createElement(Form.Control, {\n        name: \"documento\",\n        type: \"text\",\n        value: this.state.documento,\n        onChange: this.handleStateChange.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicAddress\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Direccion\"), React.createElement(Form.Control, {\n        name: \"direccion\",\n        type: \"text\",\n        value: this.state.direccion,\n        onChange: this.handleStateChange.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicPhone\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"Telefono\"), React.createElement(Form.Control, {\n        name: \"telefono\",\n        type: \"text\",\n        value: this.state.telefono,\n        onChange: this.handleStateChange.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return FormDataUser;\n}(Component);\n\nexport default FormDataUser;","map":{"version":3,"sources":["F:\\PROYECTOS\\recicla\\src\\components\\desktop\\FormDataUser.js"],"names":["React","Component","ComboBoxFormDataGrid","globalState","uploaderFile","ValidateExtension","configJson","alertify","Form","FormDataUser","props","userData","getState","state","id","email","primer_nombre","segundo_nombre","primer_apellido","segundo_apellido","id_tipo_documento","documento","direccion","telefono","imagen_user","dispatch","type","params","imagen_usuario","undefined","setState","e","target","value","formDataUser","name","file","files","allowedFiles","alert","size","maxAvatarSize","folderAvatarUser","then","res","response","data","msg","detail","catch","err","sqlParams","sqlCols","date","Date","randomDate","getTime","path","window","location","hostname","height","overflowY","handleImageUser","bind","handleStateChange","changeTipoIdentificacion"],"mappings":"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","sourcesContent":["/**\r\n* CLASS FormDataUser\r\n*\r\n* Contiene el componente formulario de datos de usuario\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\r\n\r\nimport React, { Component } from 'react';\r\nimport ComboBoxFormDataGrid from '../data_grid/ComboBoxFormDataGrid';\r\nimport globalState from '../configuration/GlobalState';\r\nimport {uploaderFile} from '../api_calls/ApiCalls';\r\nimport {ValidateExtension} from '../configuration/GlobalFunctions';\r\nimport configJson from '../configuration/configuration.json';\r\nimport alertify from 'alertifyjs';\r\nimport '../../css/alertify.css';\r\nimport Form from 'react-bootstrap/Form';\r\nimport './desktop.css'; \r\n\r\nclass FormDataUser extends Component {\r\n    constructor(props) {        \r\n        super(props);\r\n        var userData = globalState.getState().userData;        \r\n        this.state = {  \r\n                        id : userData[0].id,\r\n                        email : userData[0].email,\r\n                        primer_nombre : userData[0].primer_nombre,\r\n                        segundo_nombre : userData[0].segundo_nombre,\r\n                        primer_apellido : userData[0].primer_apellido,\r\n                        segundo_apellido : userData[0].segundo_apellido,\r\n                        id_tipo_documento :  userData[0].id_tipo_documento,\r\n                        documento : userData[0].documento,\r\n                        direccion : userData[0].direccion,\r\n                        telefono : userData[0].telefono,\r\n                        imagen_user  : 'default.png'\r\n                     }\r\n\r\n        globalState.dispatch({//cargamos lo datos del formulario y los dejamos disponibles en toda la sesion\r\n            type   : \"formDataUser\",\r\n            params : {  \r\n                        id : userData[0].id,\r\n                        email : userData[0].email,\r\n                        primer_nombre : userData[0].primer_nombre,\r\n                        segundo_nombre : userData[0].segundo_nombre,\r\n                        primer_apellido : userData[0].primer_apellido,\r\n                        segundo_apellido : userData[0].segundo_apellido,\r\n                        id_tipo_documento :  userData[0].id_tipo_documento,\r\n                        documento : userData[0].documento,\r\n                        direccion : userData[0].direccion,\r\n                        telefono : userData[0].telefono,\r\n                        imagen_user  : userData[0].imagen_usuario \r\n                     }\r\n        });\r\n    }\r\n    componentWillMount() {\r\n        //....\r\n    }\r\n    componentDidMount(){\r\n        var userData = globalState.getState().userData;    \r\n        if(userData[0].imagen_usuario !== undefined && userData[0].imagen_usuario !== \"\"){\r\n            this.setState({imagen_user : userData[0].imagen_usuario});\r\n        }\r\n    }\r\n    changeTipoIdentificacion(e){\r\n        this.setState({ id_tipo_documento : e.target.value });\r\n        globalState.getState().formDataUser['id_tipo_documento'] = e.target.value;\r\n    }\r\n    handleStateChange(e) {     //CARGAR AL ESTADO GLOBAL LOS DATOS DEL FUNCIONARIO  \r\n        this.setState({ [e.target.name]: e.target.value }); \r\n        globalState.getState().formDataUser[e.target.name] = e.target.value;                        \r\n    }\r\n    handleImageUser(e) {\r\n        //subir la imagen del usuario\r\n        var file  = e.target.files[0];     \r\n        var allowedFiles = [\".jpg\", \".jpeg\", \".png\"];\r\n        if(!ValidateExtension(allowedFiles,file.name)){\r\n            alertify.alert('Error!', 'Solo se permiten imagenes con extension jpeg, jpg o png !');\r\n        }\r\n        else{            \r\n            if(file.size > configJson.maxAvatarSize){\r\n                alertify.alert('Error!', 'Solo se permiten imagenes de maximo 500K!');\r\n            }\r\n            else{                \r\n                uploaderFile(file,'users','imagen_usuario',this.state.id,configJson.folderAvatarUser).then(res => {\r\n                    var response = res.data; \r\n                    if (response.msg === \"error\") {\r\n                        alertify.alert('Error!', 'Ha ocurrido un error subiendo el archivo!<br />Codigo de Error: '+response.detail);\r\n                    } else {                         \r\n                        this.setState({imagen_user : response.detail});\r\n                        globalState.dispatch({\r\n                                        type   : \"imageUser\",\r\n                                        params : response.detail\r\n                                    });                                  \r\n                    }\r\n                })\r\n                .catch( err => {            \r\n                    alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />'+err);\r\n                });  \r\n            }\r\n        } \r\n    }    \r\n  \trender() {\r\n        let sqlParams = {\r\n                            sqlCols : [\r\n                                'id',\r\n                                'nombre'                                \r\n                            ],                                                                                                       \r\n                        };\r\n        var date = new Date();\r\n        var randomDate = date.getTime();  \r\n        var path = \"http://\"+window.location.hostname+\":5000/\";              \r\n  \t  \treturn (\r\n  \t\t\t\t<div className=\"container\" style={{ height:'calc(100% - 92px)',overflowY : 'auto' }}>\r\n                    <div className=\"content\"> \r\n                        <br />\r\n                        <div id=\"contentImageUser\">\r\n                            <div className=\"divImageUser\">\r\n                                <img id=\"ImageUser\" alt=\"imageUser\" src={path+configJson.folderAvatarUser+this.state.imagen_user+'?'+randomDate} />\r\n                                <input id=\"uploadedImageUser\" type=\"file\" name=\"uploadedImageUser\" onChange={this.handleImageUser.bind(this)}/>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"table-responsive mb-3\">\r\n                            <Form>\r\n                                <Form.Group controlId=\"formBasicUsername\">\r\n                                     <Form.Label>Usuario</Form.Label>\r\n                                     <Form.Control name = \"email\" type=\"email\" readOnly defaultValue={this.state.email}/>                               \r\n                                </Form.Group>                        \r\n                                <Form.Group controlId=\"formBasicFirstname\">\r\n                                     <Form.Label>Primer Nombre</Form.Label>\r\n                                     <Form.Control name = \"primer_nombre\" type=\"text\" value={this.state.primer_nombre} onChange={this.handleStateChange.bind(this)}/>                               \r\n                                </Form.Group>                        \r\n                                <Form.Group controlId=\"formBasicSecondname\">\r\n                                     <Form.Label>Segundo Nombre</Form.Label>\r\n                                     <Form.Control name = \"segundo_nombre\" type=\"text\" value={this.state.segundo_nombre} onChange={this.handleStateChange.bind(this)}/>                               \r\n                                </Form.Group>                        \r\n                                <Form.Group controlId=\"formBasicLastname1\">\r\n                                     <Form.Label>Primer Apellido</Form.Label>\r\n                                     <Form.Control name = \"primer_apellido\" type=\"text\" value={this.state.primer_apellido} onChange={this.handleStateChange.bind(this)}/>                               \r\n                                </Form.Group>                        \r\n                                <Form.Group controlId=\"formBasicLastname2\">\r\n                                     <Form.Label>Segundo Apellido</Form.Label>\r\n                                     <Form.Control name = \"segundo_apellido\" type=\"text\" value={this.state.segundo_apellido} onChange={this.handleStateChange.bind(this)}/>                               \r\n                                </Form.Group>                        \r\n                                <Form.Group controlId=\"formBasicLastname2\">\r\n                                     <Form.Label>Tipo Identificacion</Form.Label>\r\n                                     <ComboBoxFormDataGrid \r\n                                        valueName = \"nombre\" \r\n                                        apiField={'document_types'} \r\n                                        dinamic=\"true\" \r\n                                        name = \"id_tipo_documento\" \r\n                                        type=\"select\" \r\n                                        functionChange={this.changeTipoIdentificacion.bind(this)} \r\n                                        value={this.state.id_tipo_documento}\r\n                                        sqlParams = { sqlParams }/>                                                            \r\n                                </Form.Group>                        \r\n                                <Form.Group controlId=\"formBasicDocument\">\r\n                                     <Form.Label>Identificacion</Form.Label>\r\n                                     <Form.Control name = \"documento\" type=\"text\" value={this.state.documento} onChange={this.handleStateChange.bind(this)}/>                               \r\n                                </Form.Group>                      \r\n                                <Form.Group controlId=\"formBasicAddress\">\r\n                                     <Form.Label>Direccion</Form.Label>\r\n                                     <Form.Control name = \"direccion\" type=\"text\" value={this.state.direccion} onChange={this.handleStateChange.bind(this)}/>                               \r\n                                </Form.Group>\r\n                                <Form.Group controlId=\"formBasicPhone\">\r\n                                     <Form.Label>Telefono</Form.Label>\r\n                                     <Form.Control name = \"telefono\" type=\"text\" value={this.state.telefono} onChange={this.handleStateChange.bind(this)}/>                               \r\n                                </Form.Group>\r\n                            </Form>\r\n                        </div> \r\n                    </div>\r\n                </div>  \t\t\t\t\r\n\t\t\t  );\r\n  \t}\r\n}\r\n\r\nexport default FormDataUser"]},"metadata":{},"sourceType":"module"}