{"ast":null,"code":"import _classCallCheck from \"D:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\PROYECTOS\\\\chatarreria-front\\\\src\\\\components\\\\reset_password\\\\ResetPasswordForm.js\";\n\n/**\r\n* CLASS ResetPasswordForm\r\n*\r\n* Contiene el componente para resetear el password despues de dar link al correo\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\nimport React, { Component } from 'react';\nimport configJson from '../configuration/configuration.json';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { checkToken, updatePassword } from '../api_calls/ApiCalls';\nimport { divMouseOver, divMouseOut, vacio, seguridad_clave } from '../configuration/GlobalFunctions';\nimport alertify from 'alertifyjs';\nimport logo_login1 from './../../images/logo_login1.png?v1.0';\n\nvar base64 = require('base-64');\n\nvar ResetPasswordForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ResetPasswordForm, _Component);\n\n  function ResetPasswordForm(props) {\n    var _this;\n\n    _classCallCheck(this, ResetPasswordForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ResetPasswordForm).call(this, props));\n    _this.state = {\n      tokenValid: 'false',\n      token: _this.props.match.params.token,\n      email: base64.decode(_this.props.match.params.user),\n      nuevoPassword: '',\n      repitaPassword: ''\n    };\n    return _this;\n  }\n\n  _createClass(ResetPasswordForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      //chequea si el token es valido\n      checkToken(this.state.email, this.state.token).then(function (response) {\n        response = response.data;\n\n        if (response.msg === 'error') {\n          _this2.setState({\n            tokenValid: 'error'\n          });\n        } else {\n          _this2.setState({\n            tokenValid: response.msg\n          });\n        }\n      }).catch(function (error) {//...\n      });\n    }\n  }, {\n    key: \"handleNuevoPassword\",\n    value: function handleNuevoPassword(e) {\n      this.setState({\n        nuevoPassword: e.target.value\n      });\n    }\n  }, {\n    key: \"handleRepitaPassword\",\n    value: function handleRepitaPassword(e) {\n      this.setState({\n        repitaPassword: e.target.value\n      });\n    }\n  }, {\n    key: \"handleResetPasswordButton\",\n    value: function handleResetPasswordButton() {\n      var _this3 = this;\n\n      //validacion del password\t\t\n      if (vacio(this.state.nuevoPassword) === false) {\n        alertify.error('Ingrese el password!');\n      } else if (vacio(this.state.repitaPassword) === false) {\n        alertify.error('Confirme el password!');\n      } else if (this.state.nuevoPassword !== this.state.repitaPassword) {\n        alertify.error('No coinciden los campos!');\n      } else {\n        if (seguridad_clave(this.state.nuevoPassword) < 100) {\n          alertify.error('La clave debe contener minimo 8 caracteres, numeros, letras mayusculas y minusculas!');\n        } else {\n          updatePassword(this.state.email, this.state.nuevoPassword).then(function (response) {\n            response = response.data;\n\n            if (response.msg === 'success') {\n              _this3.setState({\n                tokenValid: 'update_password'\n              });\n            } else {\n              _this3.setState({\n                tokenValid: 'error_password'\n              });\n            }\n          }).catch(function (error) {//...\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var token = this.state.token;\n      var date = base64.decode(token);\n      date = new Date(date);\n      date = date.getTime(); //vigencia del token\n\n      var currentDate = new Date().getTime();\n      var dateDiff = currentDate - date;\n      var seconds = dateDiff / 1000;\n      return React.createElement(\"div\", {\n        style: {\n          background: '#efefef',\n          width: '100%',\n          height: '100%',\n          overflow: 'hidden'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"adM\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          width: 'calc(100% - 40px)',\n          maxWidth: '600px',\n          height: '95px',\n          padding: '20px',\n          margin: '0 auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"adM\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        src: logo_login1,\n        style: {\n          width: '250px'\n        },\n        className: \"CToWUd\",\n        alt: \"Logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          width: 'calc(100% - 60px)',\n          maxWidth: '600px',\n          height: 'auto',\n          padding: '20px',\n          margin: '20px auto',\n          backgroundColor: '#fff',\n          borderRadius: '5px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, this.state.tokenValid === 'error_password' ? React.createElement(\"h1\", {\n        style: {\n          fontFamily: 'Roboto,sans-serif',\n          fontSize: '30px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Ha ocurrido un error actualizando el password. \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), \"Por favor intente de nuevo.\") : this.state.tokenValid === 'update_password' ? React.createElement(\"h1\", {\n        style: {\n          fontFamily: 'Roboto,sans-serif',\n          fontSize: '30px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Se ha actualizado el password satisfactoriamente!.\") : this.state.tokenValid === 'error' ? React.createElement(\"h1\", {\n        style: {\n          fontFamily: 'Roboto,sans-serif',\n          fontSize: '30px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Ha ocurrido un error accesando a la base de datos. \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), \"Por favor intente de nuevo.\") : this.state.tokenValid === 'false' ? React.createElement(\"h1\", {\n        style: {\n          fontFamily: 'Roboto,sans-serif',\n          fontSize: '30px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"EL token no coincide con la base de datos, debe realizar de nuevo el proceso!.\") : seconds < 3600 ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        style: {\n          fontFamily: 'Roboto,sans-serif',\n          fontSize: '30px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Restablecer su password\"), React.createElement(\"hr\", {\n        style: {\n          margin: '0 0 20px 0'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          fontFamily: 'Roboto,sans-serif',\n          fontSize: '14px',\n          color: '#666'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Por favor escriba el nuevo password para su cuenta \", this.state.email, \".\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }), \"Recuerda que debe ser minimo de 8 caracteres, contener numeros y letras mayusculas y minusculas.\"), React.createElement(\"div\", {\n        style: {\n          marginTop: '40px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"formBasicResetPwd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Nuevo Password\"), React.createElement(Form.Control, {\n        name: \"nuevoPassword\",\n        type: \"password\",\n        onChange: this.handleNuevoPassword.bind(this),\n        value: this.state.nuevoPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicResetPwd\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Repita Password\"), React.createElement(Form.Control, {\n        name: \"repitaPassword\",\n        type: \"password\",\n        onChange: this.handleRepitaPassword.bind(this),\n        value: this.state.repitaPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      })), React.createElement(Form.Group, {\n        controlId: \"formBasicResetPwd\",\n        style: {\n          height: '30px',\n          marginTop: '20px',\n          marginBottom: '0px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(Button, {\n        id: \"formGridBtnSave\",\n        style: {\n          padding: '10px 20px',\n          margin: '20px 0',\n          backgroundColor: configJson.fondoBotonGrilla\n        },\n        className: \"float-left mr-3\",\n        variant: \"primary\",\n        onClick: this.handleResetPasswordButton.bind(this),\n        onMouseOut: divMouseOut.bind(this, 'formGridBtnSave', configJson.fondoBotonGrilla),\n        onMouseOver: divMouseOver.bind(this, 'formGridBtnSave', configJson.fondoBotonGrilla),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"NUEVO PASSWORD\"))), React.createElement(\"div\", {\n        className: \"yj6qo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"adL\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"adL\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      })) : React.createElement(\"h1\", {\n        style: {\n          fontFamily: 'Roboto,sans-serif',\n          fontSize: '30px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \"La solicitud para restablecer el password caduco. \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }), \"Por favor realice de nuevo el proceso.\")), React.createElement(\"div\", {\n        className: \"adL\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ResetPasswordForm;\n}(Component);\n\nexport default ResetPasswordForm;","map":{"version":3,"sources":["D:\\PROYECTOS\\chatarreria-front\\src\\components\\reset_password\\ResetPasswordForm.js"],"names":["React","Component","configJson","Form","Button","checkToken","updatePassword","divMouseOver","divMouseOut","vacio","seguridad_clave","alertify","logo_login1","base64","require","ResetPasswordForm","props","state","tokenValid","token","match","params","email","decode","user","nuevoPassword","repitaPassword","then","response","data","msg","setState","catch","error","e","target","value","date","Date","getTime","currentDate","dateDiff","seconds","background","width","height","overflow","maxWidth","padding","margin","backgroundColor","borderRadius","fontFamily","fontSize","color","marginTop","handleNuevoPassword","bind","handleRepitaPassword","marginBottom","fondoBotonGrilla","handleResetPasswordButton"],"mappings":"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","sourcesContent":["/**\r\n* CLASS ResetPasswordForm\r\n*\r\n* Contiene el componente para resetear el password despues de dar link al correo\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\r\n\r\nimport React, { Component } from 'react';\r\nimport configJson from '../configuration/configuration.json';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {checkToken,updatePassword} from '../api_calls/ApiCalls';\r\nimport {divMouseOver,divMouseOut,vacio,seguridad_clave} from '../configuration/GlobalFunctions';\r\nimport alertify from 'alertifyjs';\r\nimport logo_login1 from './../../images/logo_login1.png?v1.0';\r\nvar base64     = require('base-64');\r\n\r\nclass ResetPasswordForm extends Component {\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttokenValid : 'false',\r\n\t\t\ttoken : this.props.match.params.token,\r\n\t\t\temail : base64.decode(this.props.match.params.user),\r\n\t\t\tnuevoPassword : '',\r\n\t\t\trepitaPassword : ''\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\t//chequea si el token es valido\r\n\t\tcheckToken(this.state.email,this.state.token).then(response => {             \r\n            response = response.data;\r\n            if(response.msg === 'error'){\r\n            \tthis.setState({tokenValid : 'error'});               \r\n            }\r\n            else {\r\n            \tthis.setState({tokenValid : response.msg });\r\n            }                      \r\n        })\r\n        .catch(function (error) {\r\n            //...\r\n        });\r\n\t}\r\n\thandleNuevoPassword(e){\r\n\t\tthis.setState({nuevoPassword : e.target.value }); \r\n\t}\r\n\thandleRepitaPassword(e){\r\n\t\tthis.setState({repitaPassword : e.target.value }); \r\n\t}\r\n\thandleResetPasswordButton(){//validacion del password\t\t\r\n\t\tif(vacio(this.state.nuevoPassword) === false){\r\n\t\t \talertify.error('Ingrese el password!'); \r\n\t\t}\r\n\t\telse if(vacio(this.state.repitaPassword) === false){\r\n\t\t \talertify.error('Confirme el password!'); \r\n\t\t}\r\n\t\telse if(this.state.nuevoPassword !== this.state.repitaPassword){\r\n\t\t\talertify.error('No coinciden los campos!'); \r\n\t\t}\r\n\t\telse{\r\n\t\t\tif(seguridad_clave(this.state.nuevoPassword) < 100){\r\n\t\t\t\talertify.error('La clave debe contener minimo 8 caracteres, numeros, letras mayusculas y minusculas!'); \r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tupdatePassword(this.state.email,this.state.nuevoPassword).then(response => {             \r\n\t\t            response = response.data;\t\t            \r\n\t\t            if(response.msg === 'success'){\r\n\t\t            \tthis.setState({tokenValid : 'update_password' });\r\n\t\t            } \r\n\t\t            else {\r\n\t\t            \tthis.setState({tokenValid : 'error_password'});               \r\n\t\t            }                     \r\n\t\t        })\r\n\t\t        .catch(function (error) {\r\n\t\t            //...\r\n\t\t        });\r\n\t\t\t}\r\n\t\t}\t\t\r\n\t}\r\n\trender() {  \r\n\t\tvar token = this.state.token;\r\n\t\tvar date  = base64.decode(token);\r\n\t\tdate = new Date(date);\r\n\t\tdate = date.getTime();\r\n        //vigencia del token\r\n        var currentDate = new Date().getTime();\r\n\t\tvar dateDiff    = currentDate-date;\r\n\t\tvar seconds     = dateDiff/1000;         \r\n\r\n\t\treturn <div style={{background:'#efefef',width:'100%',height:'100%',overflow:'hidden'}}>\r\n                    <div className=\"adM\">\r\n                    </div>\r\n                    <div style={{width:'calc(100% - 40px)',maxWidth:'600px',height:'95px',padding:'20px',margin:'0 auto'}}>\r\n                        <div className=\"adM\">\r\n                        </div>\r\n                        <img src={logo_login1} style={{width:'250px'}} className=\"CToWUd\" alt=\"Logo\"/>\r\n                    </div>\r\n                    <div style={{width:'calc(100% - 60px)',maxWidth:'600px',height:'auto',padding:'20px',margin:'20px auto',backgroundColor:'#fff',borderRadius:'5px'}}>\r\n                    {\r\n                   \t\t(this.state.tokenValid === 'error_password') ?\r\n                   \t\t\t<h1 style={{fontFamily:'Roboto,sans-serif',fontSize:'30px'}}>Ha ocurrido un error actualizando el password. <br /><br />Por favor intente de nuevo.</h1> \r\n                   \t\t:(this.state.tokenValid === 'update_password') ?\r\n                   \t\t\t<h1 style={{fontFamily:'Roboto,sans-serif',fontSize:'30px'}}>Se ha actualizado el password satisfactoriamente!.</h1> \r\n                   \t\t:(this.state.tokenValid === 'error') ?\r\n                   \t\t\t<h1 style={{fontFamily:'Roboto,sans-serif',fontSize:'30px'}}>Ha ocurrido un error accesando a la base de datos. <br /><br />Por favor intente de nuevo.</h1> \r\n               \t\t\t:(this.state.tokenValid === 'false') ?\r\n                   \t\t\t<h1 style={{fontFamily:'Roboto,sans-serif',fontSize:'30px'}}>EL token no coincide con la base de datos, debe realizar de nuevo el proceso!.</h1>\r\n                   \t\t:(seconds < 3600) ?\r\n\t\t                   \t  <div>\r\n\t\t                   \t\t  <h1 style={{fontFamily:'Roboto,sans-serif',fontSize:'30px'}}>Restablecer su password</h1>\r\n\t\t                          <hr style={{margin:'0 0 20px 0'}} />\r\n\t\t                          <div style={{fontFamily:'Roboto,sans-serif',fontSize:'14px',color:'#666'}}>Por favor escriba el nuevo password para su cuenta {this.state.email}.<br /><br />Recuerda que debe ser minimo de 8 caracteres, contener numeros y letras mayusculas y minusculas.</div>\r\n\t\t                          <div style={{marginTop:'40px'}}>\r\n\t\t                          \t  <Form>\t\r\n\t\t\t                          \t  <Form.Group controlId=\"formBasicResetPwd\">\r\n\t                                            <Form.Label>Nuevo Password</Form.Label>\r\n\t                                            <Form.Control name = \"nuevoPassword\" type=\"password\" onChange={this.handleNuevoPassword.bind(this)} value={this.state.nuevoPassword}/>                               \r\n\t                                      </Form.Group>\r\n\t                                      <Form.Group controlId=\"formBasicResetPwd\">\r\n\t                                            <Form.Label>Repita Password</Form.Label>\r\n\t                                            <Form.Control name = \"repitaPassword\" type=\"password\" onChange={this.handleRepitaPassword.bind(this)} value={this.state.repitaPassword}/>                               \r\n\t                                      </Form.Group>\r\n\t                                      <Form.Group controlId=\"formBasicResetPwd\" style={{height:'30px',marginTop:'20px',marginBottom:'0px'}}>\r\n\t\t                                      <Button id=\"formGridBtnSave\" style={{padding:'10px 20px',margin: '20px 0',backgroundColor:configJson.fondoBotonGrilla}} className=\"float-left mr-3\" variant=\"primary\" onClick={this.handleResetPasswordButton.bind(this)} onMouseOut={divMouseOut.bind(this,'formGridBtnSave',configJson.fondoBotonGrilla)} onMouseOver={divMouseOver.bind(this,'formGridBtnSave',configJson.fondoBotonGrilla)}>\r\n\t    \t\t\t\t  \t      \t\t\t\t\tNUEVO PASSWORD\r\n\t    \t\t\t\t  \t    \t\t\t  </Button>\r\n\t    \t\t\t\t  \t    \t\t  </Form.Group>  \r\n\t                                  </Form>\t\t                              \r\n\t\t                              <div className=\"yj6qo\"></div>\r\n\t\t                              <div className=\"adL\">\r\n\t\t                              </div>\r\n\t\t                          </div>\r\n\t\t                          <div className=\"adL\">\r\n\t\t                          </div>\r\n\t\t                   \t  </div>\r\n\t                    : <h1 style={{fontFamily:'Roboto,sans-serif',fontSize:'30px'}}>La solicitud para restablecer el password caduco. <br /><br />Por favor realice de nuevo el proceso.</h1>\r\n                    } \r\n                    </div>\r\n                    <div className=\"adL\">\r\n                    </div>\r\n                </div>;  \t  \t\r\n  \t  \t\r\n    }\r\n}   \r\n\r\nexport default ResetPasswordForm              "]},"metadata":{},"sourceType":"module"}