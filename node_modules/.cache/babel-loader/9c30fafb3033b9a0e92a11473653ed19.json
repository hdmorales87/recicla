{"ast":null,"code":"import _classCallCheck from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\src\\\\components\\\\login\\\\LoginForm.js\";\n\n/**\r\n* CLASS LoginForm\r\n*\r\n* Contiene el formulario del login de la aplicacion\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\nimport React, { Component } from 'react';\nimport './login.css';\nimport usuario_login from '../../images/usuario_login.png?v1.0';\nimport password_login from '../../images/password_login.png?v1.0';\nimport configJson from '../configuration/configuration.json';\nimport axios from 'axios';\nimport alertify from 'alertifyjs';\nimport '../../css/alertify.css';\n\nvar LoginForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginForm, _Component);\n\n  function LoginForm(props) {\n    var _this;\n\n    _classCallCheck(this, LoginForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginForm).call(this, props));\n    _this.inputEmpresa = React.createRef();\n    _this.state = {\n      empresa: ''\n    };\n    _this.state = {\n      id_empresa: 0\n    };\n    _this.state = {\n      username: ''\n    };\n    _this.state = {\n      password: ''\n    };\n    _this.handleLogin = _this.handleLogin.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(LoginForm, [{\n    key: \"handleLogin\",\n    value: function handleLogin(val) {\n      var _this2 = this;\n\n      var path = configJson.apiPath; //validacion de datos       \n\n      if (this.state.empresa === undefined || this.state.empresa === '') {\n        alertify.error('Digite la empresa!');\n        return;\n      } else if (this.state.username === undefined || this.state.username === '') {\n        alertify.error('Digite el nombre de usuario!');\n        return;\n      } else if (this.state.password === undefined || this.state.password === '') {\n        alertify.error('Digite el password!');\n        return;\n      } //consulta si el usuario existe con los datos ingresados\n\n\n      axios.get(path + 'login/' + this.state.id_empresa + '/' + this.state.username + '/' + this.state.password, {\n        withCredentials: true\n      }).then(function (res) {\n        var response = res.data;\n\n        if (response.msg === 'notExist') {\n          alertify.error('Datos de ingreso incorrectos!');\n        } else if (response.msg === 'error') {\n          alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: ' + response.detail);\n        } else {\n          _this2.props.history.push({\n            pathname: '/desktop',\n            state: {\n              usuario: response\n            }\n          });\n        }\n      }).catch(function (err) {\n        alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />' + err);\n      });\n    }\n  }, {\n    key: \"validacionEmpresa\",\n    value: function validacionEmpresa(val) {\n      var _this3 = this;\n\n      //consulta si el usuario existe con los datos ingresados\n      axios.get('http://localhost:5000/validaEmpresa/' + this.state.empresa, {\n        withCredentials: true\n      }).then(function (res) {\n        var response = res.data;\n\n        if (response.msg === 'notExist') {\n          //aqui no me dejara continuar si la empresa noe xiste\n          alertify.error('La empresa no existe!');\n\n          _this3.inputEmpresa.current.focus();\n        } else if (response.msg === 'error') {\n          //aqui no me dejara continuar si hay un error\n          alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: ' + response.detail);\n\n          _this3.inputEmpresa.current.focus();\n        } else {\n          _this3.setState({\n            id_empresa: response[0].id\n          }); //CARGAR EL ID EMPRESA                \n\n\n          alertify.success(response[0].razon_social);\n        }\n      }).catch(function (err) {\n        alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />' + err);\n\n        _this3.inputEmpresa.current.focus();\n      });\n    } //actualizacion de los datos del formulario\n\n  }, {\n    key: \"handleNitChange\",\n    value: function handleNitChange(e) {\n      this.setState({\n        empresa: e.target.value\n      });\n    }\n  }, {\n    key: \"handleUserChange\",\n    value: function handleUserChange(e) {\n      this.setState({\n        username: e.target.value\n      });\n    }\n  }, {\n    key: \"handlePasswordChange\",\n    value: function handlePasswordChange(e) {\n      this.setState({\n        password: e.target.value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return (//carga del formulario\n        React.createElement(\"form\", {\n          className: \"DivLogin\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"ContentField\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"FieldImage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          alt: \"Empresa\",\n          src: usuario_login,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"FieldDiv\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          className: \"mytext\",\n          name: \"empresa\",\n          id: \"empresa\",\n          placeholder: \"NIT Empresa\",\n          required: true,\n          onBlur: this.validacionEmpresa.bind(this),\n          onChange: this.handleNitChange.bind(this),\n          ref: this.inputEmpresa,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"ContentField\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"FieldImage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          alt: \"Usuario\",\n          src: usuario_login,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"FieldDiv\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          className: \"mytext\",\n          name: \"usuario\",\n          id: \"usuario\",\n          placeholder: \"Usuario\",\n          required: true,\n          onChange: this.handleUserChange.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"ContentField\",\n          styles: {\n            marginTop: '20px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"FieldImage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          alt: \"Contrase\\xF1a\",\n          src: password_login,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"FieldDiv\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"password\",\n          className: \"mytext\",\n          name: \"password\",\n          id: \"password\",\n          placeholder: \"Contrase\\xF1a\",\n          required: true,\n          onChange: this.handlePasswordChange.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"ContentField\",\n          styles: {\n            padding: '5px 15px 10px',\n            margin: '0px',\n            textAlign: 'right'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            color: '#FFF',\n            textAlign: 'right',\n            paddingRight: '10px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          id: \"recordarme\",\n          name: \"recordarme\",\n          type: \"checkbox\",\n          value: \"true\",\n          style: {\n            height: 'auto'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }), \"Recordar mi Usuario\")), React.createElement(\"div\", {\n          className: \"DivBoton\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"button\",\n          id: \"validateUser\",\n          onClick: this.handleLogin.bind(this),\n          value: \" \",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        })))\n      );\n    }\n  }]);\n\n  return LoginForm;\n}(Component);\n\nexport default LoginForm;","map":{"version":3,"sources":["C:\\PROYECTOS\\chatarreria-front\\src\\components\\login\\LoginForm.js"],"names":["React","Component","usuario_login","password_login","configJson","axios","alertify","LoginForm","props","inputEmpresa","createRef","state","empresa","id_empresa","username","password","handleLogin","bind","val","path","apiPath","undefined","error","get","withCredentials","then","res","response","data","msg","alert","detail","history","push","pathname","usuario","catch","err","current","focus","setState","id","success","razon_social","e","target","value","validacionEmpresa","handleNitChange","handleUserChange","marginTop","handlePasswordChange","padding","margin","textAlign","color","paddingRight","height"],"mappings":"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","sourcesContent":["/**\r\n* CLASS LoginForm\r\n*\r\n* Contiene el formulario del login de la aplicacion\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\r\n\r\nimport React, { Component } from 'react';\r\nimport './login.css';\r\nimport usuario_login from '../../images/usuario_login.png?v1.0';\r\nimport password_login from '../../images/password_login.png?v1.0';\r\nimport configJson from '../configuration/configuration.json';\r\nimport axios from 'axios';\r\nimport alertify from 'alertifyjs';\r\nimport '../../css/alertify.css';\r\n\r\nclass LoginForm extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.inputEmpresa = React.createRef();\r\n        this.state = {empresa: ''};\r\n        this.state = {id_empresa: 0};\r\n        this.state = {username: ''};\r\n        this.state = {password: ''}; \r\n        this.handleLogin = this.handleLogin.bind(this);\r\n    }\r\n    handleLogin(val) {   \r\n        const path = configJson.apiPath;  \r\n        //validacion de datos       \r\n        if(this.state.empresa === undefined || this.state.empresa === ''){\r\n            alertify.error('Digite la empresa!'); \r\n            return;\r\n        }\r\n        else if(this.state.username === undefined || this.state.username === ''){\r\n            alertify.error('Digite el nombre de usuario!'); \r\n            return;\r\n        }   \r\n        else if(this.state.password === undefined || this.state.password === ''){\r\n            alertify.error('Digite el password!'); \r\n            return;\r\n        }         \r\n        //consulta si el usuario existe con los datos ingresados\r\n        axios.get(path+'login/'+this.state.id_empresa+'/'+this.state.username+'/'+this.state.password, {withCredentials: true})\r\n        .then(res => {\r\n            var response = res.data; \r\n                      \r\n            if(response.msg === 'notExist'){\r\n                alertify.error('Datos de ingreso incorrectos!');                 \r\n            }\r\n            else if(response.msg === 'error'){\r\n                alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: '+response.detail);\r\n            }\r\n            else{\r\n                this.props.history.push({pathname: '/desktop', state : { usuario : response }}); \r\n            }          \r\n        }) \r\n        .catch( err => {            \r\n            alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />'+err);            \r\n        })\r\n    }\r\n    validacionEmpresa(val) { \r\n        //consulta si el usuario existe con los datos ingresados\r\n        axios.get('http://localhost:5000/validaEmpresa/'+this.state.empresa, {withCredentials: true})\r\n        .then(res => {\r\n            var response = res.data; \r\n                      \r\n            if(response.msg === 'notExist'){//aqui no me dejara continuar si la empresa noe xiste\r\n                alertify.error('La empresa no existe!'); \r\n                this.inputEmpresa.current.focus();\r\n            }\r\n            else if(response.msg === 'error'){//aqui no me dejara continuar si hay un error\r\n                alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: '+response.detail);\r\n                this.inputEmpresa.current.focus();\r\n            }\r\n            else{\r\n                this.setState({id_empresa: response[0].id}); //CARGAR EL ID EMPRESA                \r\n                alertify.success(response[0].razon_social);                \r\n            }          \r\n        }) \r\n        .catch( err => {            \r\n            alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />'+err);\r\n            this.inputEmpresa.current.focus();\r\n        })\r\n    }//actualizacion de los datos del formulario\r\n    handleNitChange(e) { \r\n        this.setState({empresa: e.target.value}); \r\n    }\r\n    handleUserChange(e) { \r\n        this.setState({username: e.target.value}); \r\n    }\r\n    handlePasswordChange(e) { \r\n        this.setState({password: e.target.value}); \r\n    } \r\n    render() {\r\n        return (//carga del formulario\r\n            <form className=\"DivLogin\">\r\n                <div className=\"ContentField\">\r\n                    <div className=\"FieldImage\">\r\n                        <img alt=\"Empresa\" src={ usuario_login } />\r\n                    </div>\r\n                    <div className=\"FieldDiv\">\r\n                        <input type=\"text\" className=\"mytext\" name=\"empresa\" id=\"empresa\" placeholder=\"NIT Empresa\" required onBlur={this.validacionEmpresa.bind(this)} onChange={this.handleNitChange.bind(this)}  ref={this.inputEmpresa}/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"ContentField\">\r\n                    <div className=\"FieldImage\">\r\n                        <img alt=\"Usuario\" src={ usuario_login } />\r\n                    </div>\r\n                    <div className=\"FieldDiv\">\r\n                        <input type=\"text\" className=\"mytext\" name=\"usuario\" id=\"usuario\" placeholder=\"Usuario\" required onChange={this.handleUserChange.bind(this)}/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"ContentField\" styles= {{marginTop: '20px'}}>\r\n                    <div className=\"FieldImage\">\r\n                        <img alt=\"Contraseña\" src={ password_login } />\r\n                    </div>\r\n                    <div className=\"FieldDiv\">\r\n                        <input type=\"password\" className=\"mytext\" name=\"password\" id=\"password\" placeholder=\"Contraseña\" required onChange={this.handlePasswordChange.bind(this)} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"ContentField\" styles={{padding:'5px 15px 10px', margin:'0px', textAlign:'right'}}>\r\n                    <div style={{color:'#FFF',textAlign:'right',paddingRight:'10px'}}>\r\n                        <input id=\"recordarme\" name=\"recordarme\" type=\"checkbox\" value=\"true\" style={{height:'auto'}} />Recordar mi Usuario\r\n                    </div>\r\n                </div>\r\n                <div className=\"DivBoton\">\r\n                    <input type=\"button\" id=\"validateUser\" onClick={this.handleLogin.bind(this)} value=\" \" />\r\n                </div>\r\n            </form>           \r\n        );\r\n    }\r\n}\r\n\r\nexport default LoginForm"]},"metadata":{},"sourceType":"module"}