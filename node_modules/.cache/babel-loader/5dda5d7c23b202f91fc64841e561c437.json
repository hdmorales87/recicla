{"ast":null,"code":"import _classCallCheck from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\src\\\\components\\\\data_grid\\\\DataGrid.js\";\n\n/**\r\n* CLASS DataGrid\r\n*\r\n* Contiene el contenedor principal del data grid\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\nimport React, { Component } from 'react';\nimport DataGridContainer from './DataGridContainer';\nimport Button from 'react-bootstrap/Button';\nimport { consultarFilas } from '../api_calls/ApiCalls';\nimport configJson from '../configuration/configuration.json';\nimport { divMouseOver, divMouseOut } from '../configuration/GlobalFunctions';\nimport alertify from 'alertifyjs';\nimport '../../css/alertify.css';\n\nvar DataGrid =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DataGrid, _Component);\n\n  function DataGrid(props, context) {\n    var _this;\n\n    _classCallCheck(this, DataGrid);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DataGrid).call(this, props, context));\n    _this.state = {\n      //las opciones de filtrado\n      showRecords: 5,\n      searchWord: '',\n      offsetRecord: 0,\n      resultRows: 0\n    };\n    return _this;\n  }\n\n  _createClass(DataGrid, [{\n    key: \"handleNewButton\",\n    value: function handleNewButton() {\n      //Boton nuevo registro        \n      this.props.funcionClick('FormDataGrid', {\n        idRow: 0,\n        mainContainer: this.props.mainContainer,\n        titulo: this.props.titulo,\n        apiField: this.props.apiField,\n        formFields: this.props.formFields\n      });\n    }\n  }, {\n    key: \"handleSearchField\",\n    value: function handleSearchField(event) {\n      var _this2 = this;\n\n      //Boton de Busqueda        \n      var key = event.keyCode;\n\n      if (key === 13) {\n        var searchWord = event.target.value;\n        this.setState({\n          searchWord: searchWord,\n          offsetRecord: 0\n        }, function () {\n          _this2.props.funcionClick(_this2.props.mainContainer, {\n            searchWord: _this2.state.searchWord,\n            showRecords: _this2.state.showRecords,\n            offsetRecord: _this2.state.offsetRecord\n          });\n        });\n      }\n    }\n  }, {\n    key: \"handleComboShow\",\n    value: function handleComboShow(event) {\n      var _this3 = this;\n\n      //Combo de registros por pagina       \n      var showRecords = event.target.value;\n      this.setState({\n        showRecords: showRecords\n      }, function () {\n        _this3.props.funcionClick(_this3.props.mainContainer, {\n          searchWord: _this3.state.searchWord,\n          showRecords: _this3.state.showRecords,\n          offsetRecord: _this3.state.offsetRecord\n        });\n      });\n    }\n  }, {\n    key: \"handlePrevButton\",\n    value: function handlePrevButton(event) {\n      var _this4 = this;\n\n      //Retroceder\n      var prevOffsetRecord = this.state.offsetRecord;\n      var offsetRecord = prevOffsetRecord - this.state.showRecords;\n\n      if (offsetRecord < 0) {\n        //tope inferior\n        offsetRecord = 0;\n      }\n\n      this.setState({\n        offsetRecord: offsetRecord\n      }, function () {\n        _this4.props.funcionClick(_this4.props.mainContainer, {\n          searchWord: _this4.state.searchWord,\n          showRecords: _this4.state.showRecords,\n          offsetRecord: _this4.state.offsetRecord\n        });\n      });\n    }\n  }, {\n    key: \"handleNextButton\",\n    value: function handleNextButton(event) {\n      var _this5 = this;\n\n      //Avanzar \n      var prevOffsetRecord = this.state.offsetRecord;\n      var offsetRecord = prevOffsetRecord + this.state.showRecords;\n\n      if (offsetRecord > this.state.resultRows) {\n        //tope superior\n        offsetRecord = prevOffsetRecord;\n      }\n\n      this.setState({\n        offsetRecord: offsetRecord\n      }, function () {\n        _this5.props.funcionClick(_this5.props.mainContainer, {\n          searchWord: _this5.state.searchWord,\n          showRecords: _this5.state.showRecords,\n          offsetRecord: _this5.state.offsetRecord\n        });\n      });\n    }\n  }, {\n    key: \"consultaFilas\",\n    value: function consultaFilas() {\n      var _this6 = this;\n\n      //Cuenta Filas \n      consultarFilas(this.props.apiField, this.state.searchWord).then(function (res) {\n        var response = res.data;\n\n        if (response.msg === \"error\") {\n          alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: ' + response.detail);\n        } else {\n          _this6.setState({\n            resultRows: response[0].total\n          });\n        }\n      }).catch(function (err) {\n        alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />' + err);\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.consultaFilas();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.parametro !== prevProps.parametro) {\n        this.consultaFilas();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      //los topes\n      var lastRecord = this.state.offsetRecord + this.state.showRecords;\n\n      if (lastRecord > this.state.resultRows) {\n        lastRecord = this.state.resultRows;\n      }\n\n      return (//El cuerpo del datagrid\n        React.createElement(\"div\", {\n          className: \"container ContenedorDataGrid\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"table-responsive mt-4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"titulo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, this.props.titulo)), React.createElement(\"hr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"table-responsive mb-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, React.createElement(Button, {\n          variant: \"primary\",\n          onClick: this.handleNewButton.bind(this),\n          style: {\n            backgroundColor: configJson.fondoBotonGrilla\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, \"AGREGAR NUEVO\")), React.createElement(\"div\", {\n          className: \"table-responsive mb-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            float: 'left',\n            width: '70px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, \"Mostrar:\"), React.createElement(\"div\", {\n          style: {\n            float: 'left'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(\"select\", {\n          style: {\n            border: '1px solid #dee2e6'\n          },\n          defaultValue: \"5\",\n          onChange: this.handleComboShow.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(\"option\", {\n          value: \"5\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, \"5\"), React.createElement(\"option\", {\n          value: \"10\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, \"10\"), React.createElement(\"option\", {\n          value: \"15\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, \"15\"), React.createElement(\"option\", {\n          value: \"20\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, \"20\"), React.createElement(\"option\", {\n          value: \"50\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, \"50\"), React.createElement(\"option\", {\n          value: \"todos\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, \"TODAS\"))), React.createElement(\"div\", {\n          style: {\n            float: 'left',\n            width: '70px',\n            paddingLeft: '5px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, \"Entradas\"), React.createElement(\"div\", {\n          style: {\n            float: 'right'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            float: 'left',\n            width: '70px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, \"Buscar:\"), React.createElement(\"div\", {\n          style: {\n            float: 'left'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          style: {\n            border: '1px solid #dee2e6'\n          },\n          onKeyUp: this.handleSearchField.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        })))), React.createElement(\"div\", {\n          className: \"table-responsive\",\n          style: {\n            height: 'calc(100% - 170px)'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, React.createElement(DataGridContainer, {\n          funcionClick: this.props.funcionClick,\n          titulo: this.props.titulo,\n          colsHeaders: this.props.colsHeaders,\n          colsData: this.props.colsData,\n          apiField: this.props.apiField,\n          formFields: this.props.formFields,\n          mainContainer: this.props.mainContainer,\n          parametro: this.props.parametro,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"table-responsive mb-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            float: 'left'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: {\n            float: 'left',\n            width: '90px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, \"Mostrando\"), React.createElement(\"div\", {\n          style: {\n            float: 'left',\n            width: '20px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, this.state.offsetRecord * 1 + 1), React.createElement(\"div\", {\n          style: {\n            float: 'left',\n            width: '20px',\n            paddingLeft: '5px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, \"a\"), React.createElement(\"div\", {\n          style: {\n            float: 'left',\n            width: '25px',\n            paddingLeft: '5px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, lastRecord * 1), React.createElement(\"div\", {\n          style: {\n            float: 'left',\n            width: '25px',\n            paddingLeft: '5px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, \"de\"), React.createElement(\"div\", {\n          style: {\n            float: 'left',\n            width: '35px',\n            paddingLeft: '5px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, this.state.resultRows)), React.createElement(\"div\", {\n          style: {\n            float: 'right'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, React.createElement(Button, {\n          variant: \"default\",\n          onClick: this.handlePrevButton.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          style: {\n            fontSize: '14px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, \"Anterior\")), React.createElement(Button, {\n          variant: \"default\",\n          onClick: this.handleNextButton.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          style: {\n            fontSize: '14px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, \"Siguiente\"))))))\n      );\n    }\n  }]);\n\n  return DataGrid;\n}(Component);\n\nexport default DataGrid;","map":{"version":3,"sources":["C:\\PROYECTOS\\chatarreria-front\\src\\components\\data_grid\\DataGrid.js"],"names":["React","Component","DataGridContainer","Button","consultarFilas","configJson","divMouseOver","divMouseOut","alertify","DataGrid","props","context","state","showRecords","searchWord","offsetRecord","resultRows","funcionClick","idRow","mainContainer","titulo","apiField","formFields","event","key","keyCode","target","value","setState","prevOffsetRecord","then","res","response","data","msg","alert","detail","total","catch","err","consultaFilas","prevProps","parametro","lastRecord","handleNewButton","bind","backgroundColor","fondoBotonGrilla","float","width","border","handleComboShow","paddingLeft","handleSearchField","height","colsHeaders","colsData","handlePrevButton","fontSize","handleNextButton"],"mappings":"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","sourcesContent":["/**\r\n* CLASS DataGrid\r\n*\r\n* Contiene el contenedor principal del data grid\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\r\n\r\nimport React, { Component } from 'react';\r\nimport DataGridContainer from './DataGridContainer';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {consultarFilas} from '../api_calls/ApiCalls';\r\nimport configJson from '../configuration/configuration.json';\r\nimport {divMouseOver,divMouseOut} from '../configuration/GlobalFunctions';\r\nimport alertify from 'alertifyjs';\r\nimport '../../css/alertify.css';\r\n\r\nclass DataGrid extends Component {\r\n    constructor(props, context) {\r\n        super(props, context); \r\n        this.state = {//las opciones de filtrado\r\n            showRecords  : 5,\r\n            searchWord   : '',\r\n            offsetRecord : 0,\r\n            resultRows   : 0\r\n        }\r\n    }    \r\n  \thandleNewButton(){//Boton nuevo registro        \r\n        this.props.funcionClick('FormDataGrid',{ idRow:0,mainContainer:this.props.mainContainer,titulo:this.props.titulo,apiField:this.props.apiField,formFields:this.props.formFields});\r\n    }  \r\n    handleSearchField(event){//Boton de Busqueda        \r\n        let key = event.keyCode;\r\n        if(key === 13){  \r\n            let searchWord = event.target.value;  \r\n            this.setState({ searchWord: searchWord,offsetRecord: 0 }, () => {           \r\n                this.props.funcionClick(this.props.mainContainer,{ searchWord: this.state.searchWord, showRecords: this.state.showRecords, offsetRecord: this.state.offsetRecord }); \r\n            });\r\n        }        \r\n    } \r\n    handleComboShow(event){//Combo de registros por pagina       \r\n        let showRecords = event.target.value;       \r\n        this.setState({ showRecords: showRecords }, () => {            \r\n            this.props.funcionClick(this.props.mainContainer,{ searchWord: this.state.searchWord, showRecords: this.state.showRecords, offsetRecord: this.state.offsetRecord});\r\n        });      \r\n    }\r\n    handlePrevButton(event){//Retroceder\r\n        let prevOffsetRecord = this.state.offsetRecord;    \r\n        let offsetRecord = prevOffsetRecord-this.state.showRecords;  \r\n        if(offsetRecord < 0){//tope inferior\r\n            offsetRecord = 0;\r\n        }      \r\n        this.setState({ offsetRecord: offsetRecord }, () => {            \r\n            this.props.funcionClick(this.props.mainContainer,{ searchWord: this.state.searchWord, showRecords: this.state.showRecords, offsetRecord: this.state.offsetRecord });\r\n        });      \r\n    }\r\n    handleNextButton(event){ //Avanzar \r\n        let prevOffsetRecord = this.state.offsetRecord;  \r\n        let offsetRecord = prevOffsetRecord+this.state.showRecords; \r\n        if(offsetRecord > this.state.resultRows){//tope superior\r\n            offsetRecord = prevOffsetRecord;\r\n        }    \r\n        this.setState({ offsetRecord: offsetRecord }, () => {            \r\n            this.props.funcionClick(this.props.mainContainer,{ searchWord: this.state.searchWord, showRecords: this.state.showRecords, offsetRecord: this.state.offsetRecord });\r\n        });      \r\n    } \r\n    consultaFilas(){//Cuenta Filas \r\n        consultarFilas(this.props.apiField,this.state.searchWord)\r\n        .then(res => {\r\n            var response = res.data; \r\n            if (response.msg === \"error\") {\r\n                alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: '+response.detail);\r\n            } else {                \r\n                this.setState({ resultRows: response[0].total })\r\n            }\r\n        })\r\n        .catch( err => {            \r\n            alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />'+err);\r\n        });\r\n    }\r\n    componentWillMount() {\r\n        this.consultaFilas();        \r\n    }\r\n    componentDidUpdate(prevProps){        \r\n        if (this.props.parametro !== prevProps.parametro) {           \r\n           this.consultaFilas(); \r\n        }       \r\n    }\r\n  \trender() {\r\n        //los topes\r\n        var lastRecord = this.state.offsetRecord+this.state.showRecords;\r\n        if(lastRecord > this.state.resultRows){\r\n            lastRecord = this.state.resultRows;\r\n        }\r\n                \r\n        return (//El cuerpo del datagrid\r\n            <div className=\"container ContenedorDataGrid\">\r\n                <div className=\"content\">\r\n                    <div className=\"table-responsive mt-4\">\r\n                        <div className=\"titulo\">{this.props.titulo}</div>\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"table-responsive mb-3\">\r\n                        <Button variant=\"primary\" onClick={this.handleNewButton.bind(this)} style={{backgroundColor:configJson.fondoBotonGrilla}}>AGREGAR NUEVO</Button>\r\n                    </div>\r\n                    <div className=\"table-responsive mb-3\">\r\n                        <div style={{float:'left',width:'70px'}}>Mostrar:</div> \r\n                        <div style={{float:'left'}}>\r\n                            <select style={{border:'1px solid #dee2e6'}} defaultValue=\"5\" onChange={this.handleComboShow.bind(this)}>\r\n                                <option value=\"5\">5</option>\r\n                                <option value=\"10\">10</option>\r\n                                <option value=\"15\">15</option>\r\n                                <option value=\"20\">20</option>\r\n                                <option value=\"50\">50</option>\r\n                                <option value=\"todos\">TODAS</option>\r\n                            </select>                            \r\n                        </div>\r\n                        <div style={{float:'left',width:'70px',paddingLeft:'5px'}}>Entradas</div> \r\n                        <div style={{float:'right'}}>\r\n                            <div style={{float:'left',width:'70px'}}>Buscar:</div> \r\n                            <div style={{float:'left'}}>\r\n                                <input type=\"text\" style={{border:'1px solid #dee2e6'}} onKeyUp={this.handleSearchField.bind(this)}/>\r\n                            </div>\r\n                        </div>\r\n                    </div>                    \r\n                    <div className=\"table-responsive\" style={{height:'calc(100% - 170px)'}}>\r\n                        <DataGridContainer funcionClick={this.props.funcionClick} \r\n                                           titulo={this.props.titulo}\r\n                                           colsHeaders={this.props.colsHeaders} \r\n                                           colsData={this.props.colsData}\r\n                                           apiField={this.props.apiField}\r\n                                           formFields={this.props.formFields}\r\n                                           mainContainer={this.props.mainContainer}\r\n                                           parametro={this.props.parametro}/>\r\n                    </div> \r\n                    <div className=\"table-responsive mb-3\">\r\n                        <div style={{float:'left'}} >\r\n                            <div style={{float:'left',width:'90px'}}>Mostrando</div> \r\n                            <div style={{float:'left',width:'20px'}}>{(this.state.offsetRecord*1)+1}</div> \r\n                            <div style={{float:'left',width:'20px',paddingLeft:'5px'}}>a</div> \r\n                            <div style={{float:'left',width:'25px',paddingLeft:'5px'}}>{lastRecord*1}</div>\r\n                            <div style={{float:'left',width:'25px',paddingLeft:'5px'}}>de</div>\r\n                            <div style={{float:'left',width:'35px',paddingLeft:'5px'}}>{this.state.resultRows}</div>\r\n                        </div>\r\n                        <div style={{float:'right'}} >\r\n                            <Button variant=\"default\" onClick={this.handlePrevButton.bind(this)}><span style={{fontSize:'14px'}}>Anterior</span></Button>\r\n                            <Button variant=\"default\" onClick={this.handleNextButton.bind(this)}><span style={{fontSize:'14px'}}>Siguiente</span></Button>\r\n                        </div>\r\n                    </div>                   \r\n                </div>\r\n            </div>             \r\n        )\r\n    } \r\n}\r\n\r\nexport default DataGrid"]},"metadata":{},"sourceType":"module"}