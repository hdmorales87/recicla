{"ast":null,"code":"import _classCallCheck from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\PROYECTOS\\\\recicla\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"F:\\\\PROYECTOS\\\\recicla\\\\src\\\\components\\\\control_panel\\\\Smtp.js\";\n\n/**\r\n* CLASS Smtp\r\n*\r\n* Contiene el contenedor principal de la configuracion SMTP\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\nimport React, { Component } from 'react';\nimport FormDataGrid from '../data_grid/FormDataGrid';\nimport TBar from '../tbar/TBar';\nimport { cargarFilas, checkSMTP } from '../api_calls/ApiCalls';\nimport { modalLoading } from '../configuration/GlobalFunctions';\nimport alertify from 'alertifyjs';\nimport globalState from '../configuration/GlobalState';\nimport '../../css/alertify.css';\n\nvar Smtp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Smtp, _Component);\n\n  function Smtp(props) {\n    var _this;\n\n    _classCallCheck(this, Smtp);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Smtp).call(this, props));\n    _this.state = {\n      idRow: 0,\n      btnCheck: 'none'\n    };\n    var sqlParams = {\n      sqlCols: ['id', 'correo', 'servidor', 'puerto', 'autenticacion', 'password', 'seguridad_smtp'],\n      sqlEmpresa: \"true\",\n      mode: 'rows'\n    };\n    cargarFilas('companies_smtp', '', 1, 0, '', '', sqlParams, 'rows').then(function (res) {\n      var response = res.data;\n\n      if (response.msg === \"error\") {\n        alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: ' + response.detail);\n      } else {\n        var idRow = 0;\n        var display = 'none';\n\n        if (response.length > 0) {\n          idRow = response[0];\n          display = 'block';\n        }\n\n        _this.setState({\n          idRow: idRow,\n          btnCheck: display\n        });\n      }\n    }).catch(function (err) {\n      alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />' + err);\n    });\n    return _this;\n  }\n\n  _createClass(Smtp, [{\n    key: \"validaConfiguracion\",\n    value: function validaConfiguracion() {\n      var email = globalState.getState().userData[0].email;\n      var id_empresa = globalState.getState().companyData[0].id;\n      modalLoading(true);\n      checkSMTP(email, id_empresa).then(function (response) {\n        modalLoading(false);\n        response = response.data;\n\n        if (response.msg === 'error') {\n          alertify.alert('Configuracion Incorrecta!', 'Ha ocurrido un error enviando el correo a ' + email + '!<br />Codigo de Error: ' + response.detail);\n        } else {\n          alertify.alert('Prueba Exitosa!', 'Se ha enviado un correo a ' + email + '!');\n        }\n      }).catch(function (err) {\n        modalLoading(false);\n        alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />' + err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return (//carga el componente que contiene el formulario\n        React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, React.createElement(TBar, {\n          items: [{\n            type: 'boton',\n            icon: 'done',\n            width: '100px',\n            height: '60px',\n            title: 'Validar',\n            display: this.state.btnCheck,\n            function: this.validaConfiguracion.bind(this)\n          }],\n          length: \"1\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }), React.createElement(FormDataGrid, {\n          funcionClick: this.props.funcionClick,\n          parametro: {\n            idRow: this.state.idRow,\n            mainContainer: 'ControlPanel',\n            formulario: true,\n            titulo: 'Configuracion SMTP',\n            apiField: 'companies_smtp',\n            enableBtnEdit: true,\n            formFields: [{\n              label: 'Servidor SMTP',\n              field: 'servidor',\n              type: 'text',\n              validation: '',\n              required: 'true'\n            }, {\n              label: 'Usuario',\n              field: 'correo',\n              type: 'text',\n              validation: 'email',\n              required: 'true'\n            }, {\n              label: 'Password',\n              field: 'password',\n              type: 'text',\n              validation: '',\n              required: 'true'\n            }, {\n              label: 'Puerto',\n              field: 'puerto',\n              type: 'text',\n              validation: 'entero',\n              required: 'true'\n            }, {\n              label: 'Seguridad',\n              field: 'seguridad_smtp',\n              type: 'select',\n              validation: '',\n              required: 'true',\n              dinamic: 'false',\n              valueName: 'nombre',\n              options: [{\n                id: 'no',\n                nombre: 'Ninguna'\n              }, {\n                id: 'tls',\n                nombre: 'TLS'\n              }, {\n                id: 'ssl',\n                nombre: 'SSL'\n              }]\n            }, {\n              label: 'Autenticacion',\n              field: 'autenticacion',\n              type: 'select',\n              validation: '',\n              required: 'true',\n              dinamic: 'false',\n              valueName: 'nombre',\n              options: [{\n                id: 'no',\n                nombre: 'No'\n              }, {\n                id: 'si',\n                nombre: 'Si'\n              }]\n            }, {\n              label: '',\n              field: 'id_empresa',\n              type: 'campo_empresa',\n              validation: '',\n              required: 'true'\n            }]\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }))\n      );\n    }\n  }]);\n\n  return Smtp;\n}(Component);\n\nexport default Smtp;","map":{"version":3,"sources":["F:\\PROYECTOS\\recicla\\src\\components\\control_panel\\Smtp.js"],"names":["React","Component","FormDataGrid","TBar","cargarFilas","checkSMTP","modalLoading","alertify","globalState","Smtp","props","state","idRow","btnCheck","sqlParams","sqlCols","sqlEmpresa","mode","then","res","response","data","msg","alert","detail","display","length","setState","catch","err","email","getState","userData","id_empresa","companyData","id","type","icon","width","height","title","function","validaConfiguracion","bind","funcionClick","mainContainer","formulario","titulo","apiField","enableBtnEdit","formFields","label","field","validation","required","dinamic","valueName","options","nombre"],"mappings":"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","sourcesContent":["/**\r\n* CLASS Smtp\r\n*\r\n* Contiene el contenedor principal de la configuracion SMTP\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\r\n\r\nimport React, { Component } from 'react';\r\nimport FormDataGrid from '../data_grid/FormDataGrid';\r\nimport TBar from '../tbar/TBar';\r\nimport {cargarFilas,checkSMTP} from '../api_calls/ApiCalls';\r\nimport {modalLoading} from '../configuration/GlobalFunctions';\r\nimport alertify from 'alertifyjs';\r\nimport globalState from '../configuration/GlobalState';\r\nimport '../../css/alertify.css';\r\n\r\nclass Smtp extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            idRow : 0,\r\n            btnCheck : 'none'\r\n        };    \r\n        let sqlParams = {\r\n                            sqlCols : [\r\n                                'id',\r\n                                'correo',\r\n                                'servidor',\r\n                                'puerto',\r\n                                'autenticacion',\r\n                                'password',\r\n                                'seguridad_smtp'                                \r\n                            ],\r\n                            sqlEmpresa : \"true\",\r\n                            mode : 'rows'                                                 \r\n                        }\r\n\r\n        cargarFilas('companies_smtp','',1,0,'','',sqlParams,'rows')\r\n        .then(res => {\r\n            var response = res.data; \r\n            if (response.msg === \"error\") {\r\n                alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: '+response.detail);\r\n            } \r\n            else{\r\n                let idRow = 0;\r\n                let display = 'none';\r\n                if(response.length > 0){\r\n                    idRow = response[0];\r\n                    display = 'block';\r\n                }\r\n                this.setState({ idRow: idRow,btnCheck: display });\r\n            }\r\n        })\r\n        .catch( err => {            \r\n            alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />'+err);                            \r\n        });     \r\n    }\r\n    validaConfiguracion(){\r\n        var email = globalState.getState().userData[0].email;\r\n        var id_empresa = globalState.getState().companyData[0].id;\r\n        modalLoading(true);\r\n        checkSMTP(email,id_empresa)\r\n        .then(response => {\r\n            modalLoading(false);\r\n            response = response.data;\r\n            if(response.msg === 'error'){\r\n                alertify.alert('Configuracion Incorrecta!', 'Ha ocurrido un error enviando el correo a '+email+'!<br />Codigo de Error: '+response.detail); \r\n            }           \r\n            else {                    \r\n                alertify.alert('Prueba Exitosa!', 'Se ha enviado un correo a '+email+'!');                               \r\n            }\r\n        })\r\n        .catch( err => { \r\n            modalLoading(false);           \r\n            alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />'+err);                            \r\n        });     \r\n\r\n    }\r\n  \trender() {          \r\n        return (//carga el componente que contiene el formulario\r\n            <div>\r\n                <TBar\r\n                    items={[\r\n                              {\r\n                                  type : 'boton',\r\n                                  icon : 'done',\r\n                                  width : '100px',\r\n                                  height : '60px',\r\n                                  title : 'Validar',\r\n                                  display : this.state.btnCheck,\r\n                                  function : this.validaConfiguracion.bind(this)\r\n                              },\r\n                          ]}\r\n                    length = '1'\r\n                />            \r\n                <FormDataGrid \r\n                    funcionClick = {this.props.funcionClick} \r\n                    parametro = {\r\n                                    {\r\n                                        idRow : this.state.idRow,\r\n                                        mainContainer : 'ControlPanel',\r\n                                        formulario : true,\r\n                                        titulo : 'Configuracion SMTP',\r\n                                        apiField : 'companies_smtp', \r\n                                        enableBtnEdit : true,                                                                         \r\n                                        formFields :  [{\r\n                                                            label : 'Servidor SMTP',\r\n                                                            field : 'servidor',\r\n                                                            type  : 'text',\r\n                                                            validation : '',\r\n                                                            required : 'true'                                        \r\n                                                        },\r\n                                                        {\r\n                                                            label : 'Usuario',\r\n                                                            field : 'correo',\r\n                                                            type  : 'text',\r\n                                                            validation : 'email',\r\n                                                            required : 'true'                                        \r\n                                                        },\r\n                                                        {\r\n                                                            label : 'Password',\r\n                                                            field : 'password',\r\n                                                            type  : 'text',\r\n                                                            validation : '',\r\n                                                            required : 'true'                                        \r\n                                                        },\r\n                                                        {\r\n                                                            label : 'Puerto',\r\n                                                            field : 'puerto',\r\n                                                            type  : 'text',\r\n                                                            validation : 'entero',\r\n                                                            required : 'true'                                        \r\n                                                        },                                    \r\n                                                        {\r\n                                                            label : 'Seguridad',\r\n                                                            field : 'seguridad_smtp',\r\n                                                            type  : 'select',\r\n                                                            validation : '',\r\n                                                            required : 'true',\r\n                                                            dinamic : 'false',\r\n                                                            valueName : 'nombre',\r\n                                                            options :  [{\r\n                                                                            id: 'no',\r\n                                                                            nombre: 'Ninguna',\r\n                                                                        },\r\n                                                                        {\r\n                                                                            id: 'tls',\r\n                                                                            nombre: 'TLS', \r\n                                                                        },\r\n                                                                        {\r\n                                                                            id: 'ssl',\r\n                                                                            nombre: 'SSL', \r\n                                                                        }]                                        \r\n                                                        },                                  \r\n                                                        {\r\n                                                            label : 'Autenticacion',\r\n                                                            field : 'autenticacion',\r\n                                                            type  : 'select',\r\n                                                            validation : '',\r\n                                                            required : 'true',\r\n                                                            dinamic : 'false',\r\n                                                            valueName : 'nombre',\r\n                                                            options :  [{\r\n                                                                            id: 'no',\r\n                                                                            nombre: 'No',\r\n                                                                        },\r\n                                                                        {\r\n                                                                            id: 'si',\r\n                                                                            nombre: 'Si', \r\n                                                                        }],                                        \r\n                                                        },\r\n                                                        {\r\n                                                            label : '',\r\n                                                            field : 'id_empresa',\r\n                                                            type  : 'campo_empresa',\r\n                                                            validation : '',\r\n                                                            required : 'true'                                        \r\n                                                        }] \r\n                                    }\r\n                                } \r\n                            \r\n                />  \r\n            </div>              \r\n        )\r\n    } \r\n}\r\n\r\nexport default Smtp"]},"metadata":{},"sourceType":"module"}