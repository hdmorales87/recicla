{"ast":null,"code":"import _classCallCheck from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\PROYECTOS\\\\chatarreria-front\\\\src\\\\components\\\\reports\\\\ReportContainer.js\";\n\n/**\r\n* CLASS ReportContainer\r\n*\r\n* Contiene el contenedor del generador del reporte\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\nimport React, { Component } from 'react';\nimport DataReportContainer from './DataReportContainer';\nimport MaterialIcon from 'material-icons-react';\nimport ReactToPdf from 'react-to-pdf';\nimport ReactHTMLTableToExcel from 'react-html-table-to-excel';\nimport DatePicker from 'react-date-picker';\nimport axios from 'axios';\nimport alertify from 'alertifyjs';\nimport '../../css/alertify.css';\nimport './reports.css';\n\nvar ReportContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ReportContainer, _Component);\n\n  function ReportContainer(props, context) {\n    var _this;\n\n    _classCallCheck(this, ReportContainer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ReportContainer).call(this, props, context));\n    _this.state = {\n      date1: new Date(),\n      date2: new Date(),\n      showPDF: false,\n      showXLS: false,\n      dataRow: ''\n    };\n    return _this;\n  } //manejadores de los datepicker\n\n\n  _createClass(ReportContainer, [{\n    key: \"changeDate1\",\n    value: function changeDate1(val) {\n      this.setState({\n        date1: val\n      });\n    }\n  }, {\n    key: \"changeDate2\",\n    value: function changeDate2(val) {\n      this.setState({\n        date2: val\n      });\n    }\n  }, {\n    key: \"generaReport\",\n    value: function generaReport(val) {\n      var _this2 = this;\n\n      //generador del reporte\n      var fecha1 = this.state.date1;\n      var fecha2 = this.state.date2;\n\n      if (fecha1 === null) {\n        alertify.error(\"Favor ingrese fecha inicial!\");\n        return;\n      }\n\n      if (fecha2 === null) {\n        alertify.error(\"Favor ingrese fecha final!\");\n        return;\n      } //formato de la fecha\n\n\n      fecha1 = new Date(fecha1.getTime() - fecha1.getTimezoneOffset() * 60000).toISOString().split(\"T\")[0];\n      fecha2 = new Date(fecha2.getTime() - fecha2.getTimezoneOffset() * 60000).toISOString().split(\"T\")[0]; //generacion del reporte     \n\n      axios.get(this.props.apiUrl + this.props.optionMenu.table + 'Report', {\n        withCredentials: true,\n        params: {\n          fecha1: fecha1,\n          fecha2: fecha2\n        }\n      }).then(function (res) {\n        var response = res.data;\n\n        if (response.msg === \"error\") {\n          alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: ' + response.detail);\n        } else {\n          _this2.setState({\n            dataRow: response\n          });\n\n          _this2.setState({\n            showXLS: true\n          });\n\n          _this2.setState({\n            showPDF: true\n          });\n        }\n      }).catch(function (err) {\n        alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />' + err);\n      }); //this\n      //console.log(fecha1+'-->'+fecha2);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var divPDF = React.createRef(); //console.log(this.props.optionMenu);\n\n      return React.createElement(\"div\", {\n        id: \"BodyReportContainer\",\n        style: {\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, this.props.optionMenu.label ? React.createElement(\"div\", {\n        style: {\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"tbarReportContainer\",\n        className: \"tbarReportContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"PanelScrollY_ReportContainer\",\n        style: {\n          width: 'calc(100% + 210px)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, this.props.optionMenu.dateFilter === 'true' ? React.createElement(\"div\", {\n        id: \"panelFieldReport\",\n        className: \"panelFieldReport\",\n        style: {\n          width: '250px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"form_content_field_PanelCampos_Reports_Infotipri_desde\",\n        materialdesign: \"false\",\n        className: \"formContentField\",\n        style: {\n          width: '250px',\n          minHeight: '30px',\n          display: 'block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"form_label_PanelCampos_Reports_Infotipri_desde\",\n        className: \"formLabelReport\",\n        style: {\n          width: 'auto',\n          paddingTop: '8px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Fecha inicio\"), React.createElement(\"div\", {\n        id: \"form_field_PanelCampos_Reports_Infotipri_desde\",\n        className: \"formDateReport\",\n        style: {\n          width: 'auto',\n          left: '100px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(DatePicker, {\n        onChange: this.changeDate1.bind(this),\n        format: \"y-MM-dd\",\n        value: this.state.date1,\n        style: {\n          position: 'absolute'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        \"data-role\": \"div-empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"form_content_field_PanelCampos_Reports_Infotipri_hasta\",\n        materialdesign: \"false\",\n        className: \"formContentField\",\n        style: {\n          width: '250px',\n          minHeight: '30px',\n          display: 'block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"form_label_PanelCampos_Reports_Infotipri_hasta\",\n        className: \"formLabelReport\",\n        style: {\n          width: 'auto',\n          paddingTop: '8px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Fecha fin\"), React.createElement(\"div\", {\n        id: \"form_field_PanelCampos_Reports_Infotipri_hasta\",\n        className: \"formDateReport\",\n        style: {\n          width: 'auto',\n          left: '100px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(DatePicker, {\n        onChange: this.changeDate2.bind(this),\n        format: \"y-MM-dd\",\n        value: this.state.date2,\n        style: {\n          position: 'absolute'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        \"data-role\": \"div-empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })) : '', React.createElement(\"div\", {\n        id: \"PanelBotones_Reports_Infotipri\",\n        className: \"PanelBotonesReport\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"win-btn-1\",\n        className: \"reportBtn btnReportContainer\",\n        style: {\n          width: '65px',\n          backgroundColor: '#FFF !important'\n        },\n        \"data-role\": \"win-btn\",\n        \"data-state\": \"enable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(MaterialIcon, {\n        size: 24,\n        icon: \"flash_on\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"save\",\n        os: \"windows\",\n        onClick: this.generaReport.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Generar Informe\")), React.createElement(\"div\", {\n        \"data-role\": \"div-empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), this.props.optionMenu.btnExcel === 'true' && this.state.showXLS === true ? React.createElement(\"div\", {\n        id: \"win-btn-2\",\n        className: \"reportBtn btnReportContainer\",\n        style: {\n          width: '65px',\n          backgroundColor: '#FFF !important'\n        },\n        \"data-role\": \"win-btn\",\n        \"data-state\": \"enable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(MaterialIcon, {\n        size: 24,\n        icon: \"library_books\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })), React.createElement(ReactHTMLTableToExcel, {\n        id: \"test-table-xls-button\",\n        className: \"download-table-xls-button\",\n        table: \"table-to-xls\",\n        filename: \"informe_\" + this.props.optionMenu.table,\n        sheet: \"tablexls\",\n        buttonText: \"Generar Excel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      })) : '', React.createElement(\"div\", {\n        \"data-role\": \"div-empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), this.props.optionMenu.btnPDF === 'true' && this.state.showPDF === true ? React.createElement(\"div\", {\n        id: \"win-btn-3\",\n        className: \"reportBtn btnReportContainer\",\n        style: {\n          width: '65px',\n          backgroundColor: '#FFF !important'\n        },\n        \"data-role\": \"win-btn\",\n        \"data-state\": \"enable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(MaterialIcon, {\n        size: 24,\n        icon: \"picture_as_pdf\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      })), React.createElement(ReactToPdf, {\n        targetRef: divPDF,\n        filename: \"informe_\" + this.props.optionMenu.table + \".pdf\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, function (_ref) {\n        var toPdf = _ref.toPdf;\n        return React.createElement(\"button\", {\n          onClick: toPdf,\n          className: \"save\",\n          os: \"windows\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, \"Generar PDF\");\n      })) : '', React.createElement(\"div\", {\n        \"data-role\": \"div-empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        id: \"PanelInforme_Reports_Infotipri\",\n        className: \"PanelReport\",\n        style: {\n          height: 'calc(100% - 91px)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"InformeFile_Reports_Infotipri\",\n        className: \"ReportContainer\",\n        tamano: \"letter\",\n        orientacion: \"V\",\n        style: {\n          maxWidth: '812px',\n          minWidth: '812px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(DataReportContainer, {\n        divPDF: divPDF,\n        dataRow: this.state.dataRow,\n        colsHeaders: this.props.optionMenu.colsHeaders,\n        colsData: this.props.optionMenu.colsData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      })))) : '');\n    }\n  }]);\n\n  return ReportContainer;\n}(Component);\n\nexport default ReportContainer;","map":{"version":3,"sources":["C:\\PROYECTOS\\chatarreria-front\\src\\components\\reports\\ReportContainer.js"],"names":["React","Component","DataReportContainer","MaterialIcon","ReactToPdf","ReactHTMLTableToExcel","DatePicker","axios","alertify","ReportContainer","props","context","state","date1","Date","date2","showPDF","showXLS","dataRow","val","setState","fecha1","fecha2","error","getTime","getTimezoneOffset","toISOString","split","get","apiUrl","optionMenu","table","withCredentials","params","then","res","response","data","msg","alert","detail","catch","err","divPDF","createRef","height","label","width","dateFilter","minHeight","display","paddingTop","left","changeDate1","bind","position","changeDate2","backgroundColor","textAlign","generaReport","btnExcel","btnPDF","toPdf","maxWidth","minWidth","colsHeaders","colsData"],"mappings":"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","sourcesContent":["/**\r\n* CLASS ReportContainer\r\n*\r\n* Contiene el contenedor del generador del reporte\r\n*\r\n* @author Hector Morales <warrior1987@gmail.com>\r\n*/\r\n\r\nimport React, { Component } from 'react';\r\nimport DataReportContainer from './DataReportContainer';\r\nimport MaterialIcon from 'material-icons-react';\r\nimport ReactToPdf from 'react-to-pdf';\r\nimport ReactHTMLTableToExcel from 'react-html-table-to-excel';\r\nimport DatePicker from 'react-date-picker';\r\nimport axios from 'axios';\r\nimport alertify from 'alertifyjs';\r\nimport '../../css/alertify.css';\r\n\r\nimport './reports.css';\r\n\r\nclass ReportContainer extends Component {\r\n\tconstructor(props, context) { \r\n     \tsuper(props, context);  \r\n        this.state = {\r\n            date1 : new Date(),\r\n            date2 : new Date(),\r\n            showPDF : false,\r\n            showXLS : false,\r\n            dataRow : ''\r\n        }\r\n\t} \r\n    //manejadores de los datepicker\r\n    changeDate1(val){        \r\n        this.setState({ date1 : val });\r\n    }\r\n    changeDate2(val){        \r\n        this.setState({ date2 : val });        \r\n    }\r\n    generaReport(val){//generador del reporte\r\n        let fecha1 = this.state.date1;\r\n        let fecha2 = this.state.date2;        \r\n\r\n        if(fecha1 === null){\r\n            alertify.error(\"Favor ingrese fecha inicial!\");             \r\n            return;\r\n        }\r\n        if(fecha2 === null){            \r\n            alertify.error(\"Favor ingrese fecha final!\");  \r\n            return;\r\n        }\r\n        //formato de la fecha\r\n        fecha1 = new Date(fecha1.getTime() - (fecha1.getTimezoneOffset() * 60000 )).toISOString().split(\"T\")[0];\r\n        fecha2 = new Date(fecha2.getTime() - (fecha2.getTimezoneOffset() * 60000 )).toISOString().split(\"T\")[0];\r\n\r\n        //generacion del reporte     \r\n        axios.get(this.props.apiUrl+this.props.optionMenu.table+'Report', {\r\n            withCredentials: true, \r\n            params: { \r\n                fecha1 : fecha1,\r\n                fecha2 : fecha2            \r\n            } \r\n        })\r\n        .then(res => {\r\n            var response = res.data; \r\n            if (response.msg === \"error\") {\r\n                alertify.alert('Error!', 'Ha ocurrido un error accesando a la base de datos!<br />Codigo de Error: '+response.detail);\r\n            } else {                \r\n                this.setState({ dataRow: response })\r\n                this.setState({ showXLS: true })\r\n                this.setState({ showPDF: true })\r\n            }\r\n        })\r\n        .catch( err => {            \r\n            alertify.alert('Error!', 'No se ha logrado la conexion con el servidor!<br />'+err);\r\n        });\r\n\r\n        //this\r\n\r\n        //console.log(fecha1+'-->'+fecha2);\r\n\r\n    }\t\t\r\n  \trender() {\r\n        const divPDF = React.createRef();\r\n        //console.log(this.props.optionMenu);\r\n  \t  \treturn ( \r\n            <div id=\"BodyReportContainer\" style={{height: '100%'}}>\r\n            {                \r\n                this.props.optionMenu.label ? \r\n                    <div  style={{height: '100%'}}>\r\n                         <div id=\"tbarReportContainer\" className=\"tbarReportContainer\">\r\n                             <div id=\"PanelScrollY_ReportContainer\" style={{width: 'calc(100% + 210px)'}}>\r\n                                 {\r\n                                    this.props.optionMenu.dateFilter === 'true' ?\r\n                                        <div id=\"panelFieldReport\" className=\"panelFieldReport\" style={{width: '250px'}}>\r\n                                            <div id=\"form_content_field_PanelCampos_Reports_Infotipri_desde\" materialdesign=\"false\" className=\"formContentField\" style={{width:'250px', minHeight:'30px', display:'block'}}>\r\n                                                <div id=\"form_label_PanelCampos_Reports_Infotipri_desde\" className=\"formLabelReport\" style={{width:'auto', paddingTop: '8px'}}>Fecha inicio</div>\r\n                                                <div id=\"form_field_PanelCampos_Reports_Infotipri_desde\" className=\"formDateReport\" style={{width:'auto',left:'100px'}}>                                                    \r\n                                                    <DatePicker onChange={ this.changeDate1.bind(this) } format={\"y-MM-dd\"} value={this.state.date1} style={{ position : 'absolute' }}/>\r\n                                                 </div>\r\n                                            </div>\r\n                                            <div data-role=\"div-empty\"></div>\r\n                                            <div id=\"form_content_field_PanelCampos_Reports_Infotipri_hasta\" materialdesign=\"false\" className=\"formContentField\" style={{width:'250px',minHeight:'30px', display:'block'}}>\r\n                                                <div id=\"form_label_PanelCampos_Reports_Infotipri_hasta\" className=\"formLabelReport\" style={{width:'auto', paddingTop: '8px'}}>Fecha fin</div>\r\n                                                <div id=\"form_field_PanelCampos_Reports_Infotipri_hasta\" className=\"formDateReport\" style={{width:'auto',left:'100px'}}>                                                    \r\n                                                    <DatePicker onChange={ this.changeDate2.bind(this) } format={\"y-MM-dd\"} value={this.state.date2} style={{ position : 'absolute' }}/>\r\n                                                </div>                          \r\n                                            </div>\r\n                                            <div data-role=\"div-empty\"></div>\r\n                                        </div>\r\n                                    : ''\r\n                                 }                                    \r\n                                 <div id=\"PanelBotones_Reports_Infotipri\" className=\"PanelBotonesReport\">\r\n                                     <div id=\"win-btn-1\" className=\"reportBtn btnReportContainer\" style={{width:'65px',backgroundColor: '#FFF !important'}} data-role=\"win-btn\" data-state=\"enable\"> \r\n                                         <div style={{textAlign:'center'}}>\r\n                                             <MaterialIcon size={24} icon=\"flash_on\" />\r\n                                         </div>                              \r\n                                         <button className=\"save\" os=\"windows\" onClick={ this.generaReport.bind(this) }>Generar Informe</button>\r\n                                     </div>\r\n                                     <div data-role=\"div-empty\"></div>\r\n                                     {\r\n                                        this.props.optionMenu.btnExcel === 'true' && this.state.showXLS === true ?\r\n                                            <div id=\"win-btn-2\" className=\"reportBtn btnReportContainer\" style={{width:'65px',backgroundColor: '#FFF !important'}} data-role=\"win-btn\" data-state=\"enable\">                                 \r\n                                                <div style={{textAlign:'center'}}>\r\n                                                    <MaterialIcon size={24} icon=\"library_books\" />\r\n                                                </div>\r\n                                                <ReactHTMLTableToExcel\r\n                                                    id=\"test-table-xls-button\"\r\n                                                    className=\"download-table-xls-button\"\r\n                                                    table=\"table-to-xls\"\r\n                                                    filename={\"informe_\"+this.props.optionMenu.table}\r\n                                                    sheet=\"tablexls\"\r\n                                                    buttonText=\"Generar Excel\"/>                                                \r\n                                            </div>\r\n                                        : ''\r\n                                     }\r\n                                     <div data-role=\"div-empty\"></div>\r\n                                     {\r\n                                        this.props.optionMenu.btnPDF === 'true' && this.state.showPDF === true ?\r\n                                            <div id=\"win-btn-3\" className=\"reportBtn btnReportContainer\" style={{width:'65px',backgroundColor: '#FFF !important'}} data-role=\"win-btn\" data-state=\"enable\">                                 \r\n                                                <div style={{textAlign:'center'}}>\r\n                                                    <MaterialIcon size={24} icon=\"picture_as_pdf\" />\r\n                                                </div>\r\n                                                <ReactToPdf targetRef={divPDF} filename={\"informe_\"+this.props.optionMenu.table+\".pdf\"}>\r\n                                                    {\r\n                                                        ({toPdf}) => (\r\n                                                            <button onClick={toPdf} className=\"save\" os=\"windows\">Generar PDF</button>\r\n                                                        )\r\n                                                    }\r\n                                                </ReactToPdf>\r\n                                            </div>\r\n                                        : ''\r\n                                     }\r\n                                     <div data-role=\"div-empty\"></div>\r\n                                 </div>\r\n                             </div>\r\n                         </div>\r\n                         <div id=\"PanelInforme_Reports_Infotipri\" className=\"PanelReport\" style={{height: 'calc(100% - 91px)'}}>\r\n                             <div id=\"InformeFile_Reports_Infotipri\" className=\"ReportContainer\" tamano=\"letter\" orientacion=\"V\" style={{maxWidth: '812px', minWidth: '812px'}}>\r\n                                 <DataReportContainer divPDF = {divPDF} dataRow={this.state.dataRow} colsHeaders = {this.props.optionMenu.colsHeaders} colsData = {this.props.optionMenu.colsData} />\r\n                             </div>\r\n                         </div>\r\n                     </div>\r\n                : ''\r\n                                                            \r\n            }\r\n            </div>\r\n        );\r\n  \t}\r\n}           \r\n\r\nexport default ReportContainer"]},"metadata":{},"sourceType":"module"}